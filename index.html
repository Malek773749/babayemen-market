<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#ff8c00">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¨Ø§Ø¨Ø§ Ø§Ù„ÙŠÙ…Ù† - Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø§Ù„Ø´Ø§Ù…Ù„</title>
    
    <!-- ØªØ­Ù…ÙŠÙ„ Font Awesome Ø¹Ø¨Ø± CDN Ù…Ø¹ fallback Ù…Ø­Ù„ÙŠ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø®Ø· Cairo -->
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* ==================== Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø£Ù„ÙˆØ§Ù† ÙˆØ§Ù„ØªØµÙ…ÙŠÙ… ==================== */
        :root {
            --primary: #ff6a00;
            --primary-light: #ff8c42;
            --primary-dark: #e55a00;
            --secondary: #0056b3;
            --success: #28a745;
            --danger: #dc3545;
            --warning: #ffc107;
            --info: #17a2b8;
            --whatsapp: #25D366;
            --light: #f8f9fa;
            --dark: #2c3e50;
            --gray: #6c757d;
            --light-gray: #e9ecef;
            --shadow: 0 5px 30px rgba(0, 0, 0, 0.1);
            --radius: 16px;
            --transition: all 0.3s ease;
        }

        /* ==================== Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© ==================== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Cairo', sans-serif;
        }

        body {
            background: #f8f9fa;
            color: var(--dark);
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* ==================== Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø¹Ø§Ù… ==================== */
        .hidden {
            display: none !important;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* ==================== ØªØµÙ…ÙŠÙ… ØµÙØ­Ø© Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© ==================== */
        .auth-page {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .auth-container {
            width: 100%;
            max-width: 1100px;
            margin: 0 auto;
        }

        .auth-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 10px;
        }

        .logo-icon {
            width: 60px;
            height: 60px;
            background: var(--primary);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 28px;
            box-shadow: 0 4px 12px rgba(255, 106, 0, 0.3);
        }

        .logo-text h1 {
            font-size: 28px;
            color: var(--dark);
            margin-bottom: 5px;
            font-weight: 700;
        }

        .logo-text p {
            font-size: 14px;
            color: var(--gray);
        }

        /* ==================== ØªØµÙ…ÙŠÙ… Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ ==================== */
        .navbar {
            background: white;
            box-shadow: var(--shadow);
            position: fixed;
            top: 0;
            right: 0;
            left: 0;
            z-index: 1000;
            padding: 15px 0;
        }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
            text-decoration: none;
        }

        .logo-small .logo-icon {
            width: 40px;
            height: 40px;
            font-size: 20px;
        }

        .logo-text-small h1 {
            font-size: 20px;
        }

        .logo-text-small p {
            font-size: 10px;
        }

        .nav-search {
            flex: 1;
            max-width: 500px;
            margin: 0 30px;
        }

        .search-box {
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 12px 50px 12px 20px;
            border: 2px solid var(--light-gray);
            border-radius: 25px;
            font-size: 16px;
            transition: var(--transition);
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(255, 106, 0, 0.1);
        }

        .search-btn {
            position: absolute;
            left: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: var(--primary);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            transition: var(--transition);
        }

        .search-btn:hover {
            background: var(--primary-dark);
        }

        .nav-links {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .nav-link {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: var(--gray);
            transition: var(--transition);
            position: relative;
        }

        .nav-link:hover {
            color: var(--primary);
        }

        .nav-link i {
            font-size: 22px;
            margin-bottom: 5px;
        }

        .nav-link span {
            font-size: 12px;
            font-weight: 500;
        }

        .nav-link.active {
            color: var(--primary);
        }

        .cart-count {
            position: absolute;
            top: -5px;
            left: 10px;
            background: var(--danger);
            color: white;
            font-size: 10px;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* ==================== ØªØµÙ…ÙŠÙ… ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ==================== */
        .user-menu {
            position: relative;
        }

        .user-btn {
            display: flex;
            align-items: center;
            gap: 10px;
            background: none;
            border: none;
            cursor: pointer;
            color: var(--dark);
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .user-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            background: white;
            box-shadow: var(--shadow);
            border-radius: var(--radius);
            padding: 10px 0;
            min-width: 200px;
            display: none;
            z-index: 100;
        }

        .user-menu:hover .user-dropdown {
            display: block;
        }

        .dropdown-item {
            display: block;
            padding: 10px 20px;
            text-decoration: none;
            color: var(--dark);
            transition: var(--transition);
        }

        .dropdown-item:hover {
            background: var(--light);
            color: var(--primary);
        }

        /* ==================== ØªØµÙ…ÙŠÙ… Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØµÙØ­Ø© ==================== */
        .main-content {
            padding-top: 90px;
            padding-bottom: 80px;
        }

        .user-type-display {
            background: white;
            border-radius: var(--radius);
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .user-type-badge {
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 14px;
        }

        .user-type-badge.buyer {
            background: #e3f2fd;
            color: #1976d2;
        }

        .user-type-badge.seller {
            background: #f3e5f5;
            color: #7b1fa2;
        }

        /* ==================== ØªØµÙ…ÙŠÙ… Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ø¹Ø§Ù…Ø© ==================== */
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .section-title {
            font-size: 24px;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .view-all {
            color: var(--primary);
            text-decoration: none;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* ==================== ØªØµÙ…ÙŠÙ… Ø§Ù„ÙØ¦Ø§Øª ==================== */
        .categories-section {
            margin-bottom: 30px;
        }

        .categories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }

        .category-card {
            background: white;
            border-radius: var(--radius);
            padding: 20px;
            text-align: center;
            box-shadow: var(--shadow);
            transition: var(--transition);
            cursor: pointer;
        }

        .category-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .category-icon {
            width: 60px;
            height: 60px;
            background: var(--light);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            color: var(--primary);
            font-size: 24px;
        }

        /* ==================== ØªØµÙ…ÙŠÙ… Ø§Ù„Ø¹Ø±ÙˆØ¶ ==================== */
        .offers-section {
            margin-bottom: 40px;
        }

        .offers-slider {
            position: relative;
            overflow: hidden;
            border-radius: var(--radius);
        }

        .offer-slide {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            padding: 40px;
            border-radius: var(--radius);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .offer-content h2 {
            font-size: 28px;
            margin-bottom: 10px;
        }

        .offer-content p {
            font-size: 16px;
            opacity: 0.9;
            margin-bottom: 20px;
        }

        .offer-btn {
            background: white;
            color: var(--primary);
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .offer-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        /* ==================== ØªØµÙ…ÙŠÙ… Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ==================== */
        .products-section {
            margin-bottom: 40px;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
        }

        .product-card {
            background: white;
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
            position: relative;
        }

        .product-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }

        .product-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            background: var(--light-gray);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--gray);
            font-size: 48px;
        }

        .product-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--danger);
            color: white;
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .product-info {
            padding: 20px;
        }

        .product-category {
            color: var(--gray);
            font-size: 12px;
            margin-bottom: 5px;
        }

        .product-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--dark);
        }

        .product-description {
            color: var(--gray);
            font-size: 14px;
            margin-bottom: 15px;
            line-height: 1.5;
        }

        .product-price {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .current-price {
            font-size: 20px;
            font-weight: 700;
            color: var(--primary);
        }

        .original-price {
            font-size: 14px;
            color: var(--gray);
            text-decoration: line-through;
        }

        .product-rating {
            display: flex;
            align-items: center;
            gap: 5px;
            margin-bottom: 15px;
        }

        .stars {
            color: #ffc107;
        }

        .rating-count {
            color: var(--gray);
            font-size: 12px;
        }

        /* ==================== ØªØµÙ…ÙŠÙ… Ø§Ù„Ø£Ø²Ø±Ø§Ø± ==================== */
        .btn {
            padding: 10px 15px;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
            justify-content: center;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
        }

        .btn-outline {
            background: white;
            color: var(--primary);
            border: 2px solid var(--primary);
        }

        .btn-outline:hover {
            background: var(--primary);
            color: white;
        }

        .btn-seller {
            background: #7b1fa2;
            color: white;
        }

        .btn-seller:hover {
            background: #6a1b9a;
        }

        .btn-whatsapp {
            background: var(--whatsapp);
            color: white;
        }

        .btn-whatsapp:hover {
            background: #128C7E;
        }

        .product-actions {
            display: flex;
            gap: 10px;
        }

        /* ==================== ØªØµÙ…ÙŠÙ… ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„ØªØ§Ø¬Ø± ==================== */
        .seller-dashboard {
            background: white;
            border-radius: var(--radius);
            padding: 30px;
            box-shadow: var(--shadow);
            margin-bottom: 40px;
        }

        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--light);
            border-radius: var(--radius);
            padding: 20px;
            text-align: center;
        }

        .stat-value {
            font-size: 32px;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 10px;
        }

        .stat-label {
            color: var(--gray);
            font-size: 14px;
        }

        .manage-products {
            background: white;
            border-radius: var(--radius);
            padding: 30px;
            box-shadow: var(--shadow);
            margin-bottom: 40px;
        }

        /* ==================== ØªØµÙ…ÙŠÙ… Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ ==================== */
        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            color: var(--dark);
            font-weight: 600;
            font-size: 14px;
        }

        .input-with-icon {
            position: relative;
        }

        .form-input {
            width: 100%;
            padding: 14px 45px 14px 15px;
            border: 2px solid var(--light-gray);
            border-radius: 12px;
            font-size: 15px;
            transition: var(--transition);
            background: white;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(255, 106, 0, 0.1);
        }

        .input-icon {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray);
            font-size: 16px;
        }

        .password-toggle {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--gray);
            cursor: pointer;
            font-size: 16px;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .password-toggle:hover {
            color: var(--primary);
        }

        /* ==================== ØªØ­Ø³ÙŠÙ† Ø®ÙŠØ§Ø±Ø§Øª Ø±ÙØ¹ Ø§Ù„ØµÙˆØ± ==================== */
        .image-upload-option {
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            margin-bottom: 15px;
        }

        .image-upload-option:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .image-upload-option:active {
            transform: translateY(-1px);
        }

        /* ØªØ­Ø³ÙŠÙ† Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„ØµÙˆØ±Ø© */
        .image-preview-container {
            margin-top: 20px;
            display: none;
            padding: 15px;
            background: var(--light);
            border-radius: var(--radius);
            border: 2px dashed var(--light-gray);
        }

        .image-preview {
            max-width: 200px;
            max-height: 200px;
            border-radius: 8px;
            border: 2px solid var(--light-gray);
            display: block;
        }

        .remove-image-btn {
            background: var(--danger);
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            cursor: pointer;
            position: absolute;
            top: -10px;
            left: -10px;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .remove-image-btn:hover {
            background: #c82333;
            transform: scale(1.1);
        }

        /* ==================== ØªØµÙ…ÙŠÙ… Ø§Ù„ÙÙˆØªØ± ==================== */
        .footer {
            background: var(--dark);
            color: white;
            padding: 50px 0 20px;
        }

        .footer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-bottom: 30px;
        }

        .footer-section h3 {
            font-size: 20px;
            margin-bottom: 20px;
            color: white;
        }

        .footer-links {
            list-style: none;
        }

        .footer-links li {
            margin-bottom: 10px;
        }

        .footer-links a {
            color: #ddd;
            text-decoration: none;
            transition: var(--transition);
        }

        .footer-links a:hover {
            color: var(--primary);
            padding-right: 5px;
        }

        .footer-bottom {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #ddd;
            font-size: 14px;
        }

        /* ==================== ØªØµÙ…ÙŠÙ… Ù…ØªØ¬Ø§ÙˆØ¨ ==================== */
        @media (max-width: 992px) {
            .nav-search {
                max-width: 300px;
            }
            
            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }
        }

        @media (max-width: 768px) {
            .nav-search {
                display: none;
            }
            
            .nav-links {
                display: none;
            }
            
            .main-content {
                padding-bottom: 70px;
            }
            
            .offer-slide {
                flex-direction: column;
                text-align: center;
                padding: 30px 20px;
            }
            
            .categories-grid {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .products-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .dashboard-stats {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .product-actions {
                flex-direction: column;
            }
            
            .image-upload-option {
                padding: 15px;
            }
        }

        @media (max-width: 576px) {
            .categories-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .products-grid {
                grid-template-columns: 1fr;
            }
            
            .footer-grid {
                grid-template-columns: 1fr;
            }
            
            .dashboard-stats {
                grid-template-columns: 1fr;
            }
            
            .image-preview {
                max-width: 150px;
                max-height: 150px;
            }
        }

        /* ==================== Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ==================== */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 10px;
            color: white;
            font-weight: 500;
            z-index: 2000;
            animation: slideIn 0.3s ease, fadeOut 0.3s ease 2.7s forwards;
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            gap: 10px;
            max-width: 400px;
        }

        .notification.success { background: var(--success); }
        .notification.error { background: var(--danger); }
        .notification.warning { background: var(--warning); color: #333; }
        .notification.info { background: var(--info); }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }

        /* ==================== ØªØµÙ…ÙŠÙ… ØµÙØ­Ø© Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© ==================== */
        .auth-tabs {
            display: flex;
            background: white;
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
        }

        .auth-tab {
            flex: 1;
            padding: 20px;
            text-align: center;
            background: white;
            border: none;
            font-size: 18px;
            font-weight: 700;
            color: var(--gray);
            cursor: pointer;
            transition: var(--transition);
            position: relative;
        }

        .auth-tab.active {
            color: var(--primary);
        }

        .auth-tab.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            right: 0;
            left: 0;
            height: 4px;
            background: var(--primary);
        }

        .auth-tab:hover:not(.active) {
            background: var(--light);
            color: var(--dark);
        }

        .auth-content {
            display: flex;
            gap: 30px;
        }

        .auth-form-container {
            flex: 1;
            background: white;
            border-radius: var(--radius);
            padding: 40px;
            box-shadow: var(--shadow);
            border: 1px solid rgba(0, 0, 0, 0.05);
        }

        .welcome-text {
            text-align: center;
            margin-bottom: 30px;
        }

        .welcome-text h2 {
            font-size: 24px;
            color: var(--dark);
            margin-bottom: 10px;
        }

        .welcome-text p {
            color: var(--gray);
            font-size: 15px;
        }

        /* Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø®Ø·Ø£ */
        .error-message {
            color: var(--danger);
            font-size: 12px;
            margin-top: 5px;
            display: none;
        }

        .input-error {
            border-color: var(--danger) !important;
        }

        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 12px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
            text-align: center;
        }

        /* Ø²Ø± Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ø£Ø¹Ù„Ù‰ */
        .scroll-to-top {
            position: fixed;
            bottom: 80px;
            left: 20px;
            width: 50px;
            height: 50px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            cursor: pointer;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
            z-index: 999;
            box-shadow: var(--shadow);
        }

        .scroll-to-top.show {
            opacity: 1;
            visibility: visible;
        }

        .scroll-to-top:hover {
            background: var(--primary-dark);
            transform: translateY(-3px);
        }

        /* Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ù„Ù„Ø¸Ù‡ÙˆØ± */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <!-- ==================== ØµÙØ­Ø© Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© (ØªØ¸Ù‡Ø± ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©) ==================== -->
    <div id="authPage" class="auth-page">
        <div class="auth-container">
            <div class="auth-header">
                <div class="logo-container">
                    <div class="logo-icon">
                        <i class="fas fa-store"></i>
                    </div>
                    <div class="logo-text">
                        <h1>Ø¨Ø§Ø¨Ø§ Ø§Ù„ÙŠÙ…Ù†</h1>
                        <p>Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø§Ù„Ø´Ø§Ù…Ù„</p>
                    </div>
                </div>
            </div>

            <div class="auth-tabs">
                <button class="auth-tab active" id="loginTab" onclick="switchTab('login')">
                    <i class="fas fa-sign-in-alt"></i> ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
                </button>
                <button class="auth-tab" id="registerTab" onclick="switchTab('register')">
                    <i class="fas fa-user-plus"></i> Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨
                </button>
            </div>

            <div class="auth-content">
                <!-- Ù‚Ø³Ù… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
                <div class="auth-form-container" id="loginSection" style="display: block;">
                    <div class="welcome-text">
                        <h2>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ø¹ÙˆØ¯ØªÙƒ! ğŸ‘‹</h2>
                        <p>Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„Ùƒ Ù„ØªØ³ØªÙ…ØªØ¹ Ø¨ØªØ¬Ø±Ø¨Ø© ØªØ³ÙˆÙ‚ Ø§Ø³ØªØ«Ù†Ø§Ø¦ÙŠØ©</p>
                    </div>

                    <div class="success-message" id="loginSuccessMessage">
                        <i class="fas fa-check-circle"></i> ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­!
                    </div>

                    <form id="loginForm">
                        <div class="form-group">
                            <label class="form-label" for="loginEmail">
                                <i class="fas fa-envelope"></i> Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
                            </label>
                            <div class="input-with-icon">
                                <input 
                                    type="email" 
                                    id="loginEmail" 
                                    class="form-input" 
                                    placeholder="example@email.com"
                                    required
                                >
                                <span class="input-icon">
                                    <i class="fas fa-envelope"></i>
                                </span>
                            </div>
                            <div class="error-message" id="loginEmailError">
                                ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØµØ­ÙŠØ­
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="loginPassword">
                                <i class="fas fa-lock"></i> ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
                            </label>
                            <div class="input-with-icon">
                                <input 
                                    type="password" 
                                    id="loginPassword" 
                                    class="form-input" 
                                    placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"
                                    required
                                    minlength="6"
                                >
                                <button type="button" class="password-toggle" id="toggleLoginPassword">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                            <div class="error-message" id="loginPasswordError">
                                ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† 6 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„
                            </div>
                        </div>

                        <div style="display: flex; justify-content: space-between; align-items: center; margin: 25px 0;">
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <input type="checkbox" id="rememberMe">
                                <label for="rememberMe" style="color: var(--dark); font-size: 14px; cursor: pointer;">ØªØ°ÙƒØ±Ù†ÙŠ</label>
                            </div>
                            <a href="#" style="color: var(--primary); text-decoration: none; font-size: 14px; font-weight: 600;" 
                               onclick="showForgotPassword()">Ù†Ø³ÙŠØª ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±ØŸ</a>
                        </div>

                        <button type="submit" class="btn btn-primary" style="width: 100%; padding: 16px; font-size: 16px;">
                            <i class="fas fa-sign-in-alt"></i> ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
                        </button>
                    </form>

                    <div style="text-align: center; margin-top: 20px; color: var(--gray); font-size: 14px;">
                        Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯ØŸ 
                        <a href="javascript:void(0);" onclick="switchTab('register')" 
                           style="color: var(--primary); text-decoration: none; font-weight: 700;">
                            Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯
                        </a>
                    </div>
                </div>

                <!-- Ù‚Ø³Ù… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ -->
                <div class="auth-form-container" id="registerSection" style="display: none;">
                    <div class="welcome-text">
                        <h2>Ø£Ù†Ø´Ø¦ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯ ğŸ‰</h2>
                        <p>Ø§Ù†Ø¶Ù… Ø¥Ù„ÙŠÙ†Ø§ ÙˆØ§Ø¨Ø¯Ø£ Ø±Ø­Ù„ØªÙƒ ÙÙŠ Ø¹Ø§Ù„Ù… Ø§Ù„ØªØ³ÙˆÙ‚ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</p>
                    </div>

                    <div class="success-message" id="registerSuccessMessage">
                        <i class="fas fa-check-circle"></i> ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­!
                    </div>

                    <form id="registerForm">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                            <div class="form-group">
                                <label class="form-label" for="fullName">
                                    <i class="fas fa-user"></i> Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„
                                </label>
                                <div class="input-with-icon">
                                    <input 
                                        type="text" 
                                        id="fullName" 
                                        class="form-input" 
                                        placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ§Ù…Ù„"
                                        required
                                        minlength="3"
                                    >
                                    <span class="input-icon">
                                        <i class="fas fa-user"></i>
                                    </span>
                                </div>
                                <div class="error-message" id="nameError">
                                    Ø§Ù„Ø§Ø³Ù… ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† 3 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="form-label" for="phone">
                                    <i class="fas fa-phone"></i> Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ
                                </label>
                                <div class="input-with-icon">
                                    <input 
                                        type="tel" 
                                        id="phone" 
                                        class="form-input" 
                                        placeholder="771234567"
                                        required
                                        pattern="[0-9]{9}"
                                    >
                                    <span class="input-icon">
                                        <i class="fas fa-phone"></i>
                                    </span>
                                </div>
                                <div class="error-message" id="phoneError">
                                    Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† 9 Ø£Ø±Ù‚Ø§Ù…
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="registerEmail">
                                <i class="fas fa-envelope"></i> Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
                            </label>
                            <div class="input-with-icon">
                                <input 
                                    type="email" 
                                    id="registerEmail" 
                                    class="form-input" 
                                    placeholder="example@email.com"
                                    required
                                >
                                <span class="input-icon">
                                    <i class="fas fa-envelope"></i>
                                </span>
                            </div>
                            <div class="error-message" id="registerEmailError">
                                ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØµØ­ÙŠØ­
                            </div>
                        </div>

                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                            <div class="form-group">
                                <label class="form-label" for="registerPassword">
                                    <i class="fas fa-lock"></i> ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
                                </label>
                                <div class="input-with-icon">
                                    <input 
                                        type="password" 
                                        id="registerPassword" 
                                        class="form-input" 
                                        placeholder="Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"
                                        required
                                        minlength="6"
                                    >
                                    <button type="button" class="password-toggle" id="toggleRegisterPassword">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                                <div class="error-message" id="registerPasswordError">
                                    ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† 6 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="form-label" for="confirmPassword">
                                    <i class="fas fa-lock"></i> ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
                                </label>
                                <div class="input-with-icon">
                                    <input 
                                        type="password" 
                                        id="confirmPassword" 
                                        class="form-input" 
                                        placeholder="Ø£Ø¹Ø¯ ÙƒØªØ§Ø¨Ø© ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"
                                        required
                                    >
                                    <button type="button" class="password-toggle" id="toggleConfirmPassword">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                                <div class="error-message" id="confirmPasswordError">
                                    ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± Ù…ØªØ·Ø§Ø¨Ù‚Ø©
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-user-tag"></i> Ù†ÙˆØ¹ Ø§Ù„Ø­Ø³Ø§Ø¨
                            </label>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px;">
                                <div class="account-type-btn selected" data-type="buyer" id="buyerBtn" 
                                     onclick="selectAccountType('buyer')"
                                     style="padding: 15px; border: 2px solid var(--light-gray); border-radius: 12px; background: white; display: flex; flex-direction: column; align-items: center; gap: 8px; cursor: pointer; transition: var(--transition);">
                                    <i class="fas fa-shopping-cart"></i>
                                    <span style="font-weight: 600; color: var(--dark); font-size: 14px;">Ù…Ø´ØªØ±ÙŠ</span>
                                    <span style="color: var(--gray); font-size: 12px; text-align: center;">Ù„Ø´Ø±Ø§Ø¡ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ÙˆØ§Ù„Ø®Ø¯Ù…Ø§Øª</span>
                                </div>
                                <div class="account-type-btn" data-type="seller" id="sellerBtn" 
                                     onclick="selectAccountType('seller')"
                                     style="padding: 15px; border: 2px solid var(--light-gray); border-radius: 12px; background: white; display: flex; flex-direction: column; align-items: center; gap: 8px; cursor: pointer; transition: var(--transition);">
                                    <i class="fas fa-store"></i>
                                    <span style="font-weight: 600; color: var(--dark); font-size: 14px;">ØªØ§Ø¬Ø±</span>
                                    <span style="color: var(--gray); font-size: 12px; text-align: center;">Ù„Ø¨ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ÙˆØ§Ù„Ø®Ø¯Ù…Ø§Øª</span>
                                </div>
                            </div>
                            <input type="hidden" id="accountType" name="accountType" value="buyer" required>
                            <div class="error-message" id="accountTypeError">
                                ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù†ÙˆØ¹ Ø§Ù„Ø­Ø³Ø§Ø¨
                            </div>
                        </div>

                        <div style="display: flex; align-items: flex-start; gap: 10px; margin: 25px 0; padding: 15px; background: var(--light); border-radius: 10px;">
                            <input type="checkbox" id="agreeTerms" required style="margin-top: 3px;">
                            <label for="agreeTerms" style="color: var(--dark); font-size: 13px; line-height: 1.5;">
                                Ø£ÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ 
                                <a href="javascript:void(0);" onclick="showTerms()" style="color: var(--primary); text-decoration: none; font-weight: 600;">Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù…</a> 
                                Ùˆ 
                                <a href="javascript:void(0);" onclick="showPrivacy()" style="color: var(--primary); text-decoration: none; font-weight: 600;">Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©</a>
                                Ù„Ù…ÙˆÙ‚Ø¹ Ø¨Ø§Ø¨Ø§ Ø§Ù„ÙŠÙ…Ù†
                            </label>
                        </div>
                        <div class="error-message" id="termsError">
                            ÙŠØ¬Ø¨ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù…
                        </div>

                        <button type="submit" class="btn btn-primary" style="width: 100%; padding: 16px; font-size: 16px;">
                            <i class="fas fa-user-plus"></i> Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯
                        </button>
                    </form>

                    <div style="text-align: center; margin-top: 20px; color: var(--gray); font-size: 14px;">
                        Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ Ø¨Ø§Ù„ÙØ¹Ù„ØŸ 
                        <a href="javascript:void(0);" onclick="switchTab('login')" 
                           style="color: var(--primary); text-decoration: none; font-weight: 700;">
                            Ø³Ø¬Ù„ Ø¯Ø®ÙˆÙ„Ùƒ Ù‡Ù†Ø§
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ==================== Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ (ÙŠØ¸Ù‡Ø± Ø¨Ø¹Ø¯ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„) ==================== -->
    <div id="mainApp" class="hidden">
        <!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ Ø§Ù„Ø¹Ù„ÙˆÙŠ -->
        <nav class="navbar">
            <div class="nav-container">
                <a href="#" class="logo" onclick="showHome()">
                    <div class="logo-icon logo-small">
                        <i class="fas fa-store"></i>
                    </div>
                    <div class="logo-text logo-text-small">
                        <h1>Ø¨Ø§Ø¨Ø§ Ø§Ù„ÙŠÙ…Ù†</h1>
                        <p>Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø§Ù„Ø´Ø§Ù…Ù„</p>
                    </div>
                </a>

                <div class="nav-search">
                    <div class="search-box">
                        <input type="text" class="search-input" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†ØªØ¬ØŒ Ù…ØªØ¬Ø±ØŒ Ø£Ùˆ ÙØ¦Ø©...">
                        <button class="search-btn">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                </div>

                <div class="nav-links">
                    <a href="#" class="nav-link active" onclick="showHome()">
                        <i class="fas fa-home"></i>
                        <span>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
                    </a>
                    <a href="#" class="nav-link" onclick="showCategories()">
                        <i class="fas fa-th-large"></i>
                        <span>Ø§Ù„ÙØ¦Ø§Øª</span>
                    </a>
                    <a href="#" class="nav-link" onclick="showStores()">
                        <i class="fas fa-store-alt"></i>
                        <span>Ø§Ù„Ù…ØªØ§Ø¬Ø±</span>
                    </a>
                    <a href="#" class="nav-link" onclick="showCart()">
                        <i class="fas fa-shopping-cart"></i>
                        <span>Ø§Ù„Ø³Ù„Ø©</span>
                        <span class="cart-count" id="cartCount">0</span>
                    </a>
                    <a href="#" class="nav-link" onclick="showOrders()">
                        <i class="fas fa-clipboard-list"></i>
                        <span>Ø·Ù„Ø¨Ø§ØªÙŠ</span>
                    </a>
                    <div class="user-menu">
                        <button class="user-btn">
                            <div class="user-avatar" id="userAvatar">Ù…</div>
                            <span id="userName">Ø­Ø³Ø§Ø¨ÙŠ</span>
                            <i class="fas fa-chevron-down"></i>
                        </button>
                        <div class="user-dropdown">
                            <a href="#" class="dropdown-item" onclick="showProfile()">
                                <i class="fas fa-user"></i> Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ
                            </a>
                            <a href="#" class="dropdown-item" onclick="showWallet()">
                                <i class="fas fa-wallet"></i> Ù…Ø­ÙØ¸ØªÙŠ
                            </a>
                            <a href="#" class="dropdown-item" onclick="showWishlist()">
                                <i class="fas fa-heart"></i> Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ù…Ù†ÙŠØ§Øª
                            </a>
                            <div class="dropdown-divider"></div>
                            <a href="#" class="dropdown-item" onclick="logout()">
                                <i class="fas fa-sign-out-alt"></i> ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ -->
        <main class="main-content">
            <div class="container">
                <!-- Ø¹Ø±Ø¶ Ù†ÙˆØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… -->
                <div class="user-type-display" id="userTypeDisplay">
                    <div>
                        <h3 id="userWelcome">Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ </h3>
                        <p id="userTypeText"></p>
                    </div>
                    <div class="user-type-badge" id="userTypeBadge"></div>
                </div>

                <!-- ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠ -->
                <div id="buyerInterface">
                    <!-- Ø§Ù„ÙØ¦Ø§Øª Ø§Ù„Ø³Ø±ÙŠØ¹Ø© -->
                    <section class="categories-section">
                        <h2 class="section-title">
                            <i class="fas fa-tags"></i> Ø§Ù„ÙØ¦Ø§Øª
                        </h2>
                        <div class="categories-grid" id="categoriesGrid"></div>
                    </section>

                    <!-- Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø®Ø§ØµØ© -->
                    <section class="offers-section">
                        <div class="section-header">
                            <h2 class="section-title">
                                <i class="fas fa-bolt"></i> Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø®Ø§ØµØ©
                            </h2>
                            <a href="#" class="view-all" onclick="showAllOffers()">
                                Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„ <i class="fas fa-arrow-left"></i>
                            </a>
                        </div>
                        <div class="offers-slider">
                            <div class="offer-slide">
                                <div class="offer-content">
                                    <h2>ØªØ®ÙÙŠØ¶Ø§Øª Ø§Ù„Ù…ÙˆØ³Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯!</h2>
                                    <p>Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ø®ØµÙ… ÙŠØµÙ„ Ø¥Ù„Ù‰ 50% Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</p>
                                    <button class="offer-btn" onclick="showAllOffers()">ØªØ³ÙˆÙ‚ Ø§Ù„Ø¢Ù†</button>
                                </div>
                                <div class="offer-image">
                                    <div style="width: 300px; height: 200px; background: rgba(255,255,255,0.2); border-radius: 10px; display: flex; align-items: center; justify-content: center; color: white; font-size: 48px;">
                                        <i class="fas fa-percent"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø´Ø§Ø¦Ø¹Ø© -->
                    <section class="products-section">
                        <div class="section-header">
                            <h2 class="section-title">
                                <i class="fas fa-fire"></i> Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©
                            </h2>
                            <a href="#" class="view-all" onclick="showAllProducts()">
                                Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„ <i class="fas fa-arrow-left"></i>
                            </a>
                        </div>
                        <div class="products-grid" id="productsGrid"></div>
                    </section>

                    <!-- Ø§Ù„Ù…ØªØ§Ø¬Ø± Ø§Ù„Ù…Ù…ÙŠØ²Ø© -->
                    <section class="stores-section">
                        <div class="section-header">
                            <h2 class="section-title">
                                <i class="fas fa-crown"></i> Ø§Ù„Ù…ØªØ§Ø¬Ø± Ø§Ù„Ù…Ù…ÙŠØ²Ø©
                            </h2>
                            <a href="#" class="view-all" onclick="showAllStores()">
                                Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„ <i class="fas fa-arrow-left"></i>
                            </a>
                        </div>
                        <div class="stores-grid" id="storesGrid"></div>
                    </section>

                    <!-- Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø¶Ø§ÙØ© Ø­Ø¯ÙŠØ«Ø§Ù‹ -->
                    <section class="products-section">
                        <div class="section-header">
                            <h2 class="section-title">
                                <i class="fas fa-clock"></i> Ø­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø¶Ø§ÙØ©
                            </h2>
                        </div>
                        <div class="products-grid" id="newProductsGrid"></div>
                    </section>
                </div>

                <!-- ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„ØªØ§Ø¬Ø± -->
                <div id="sellerInterface" class="hidden">
                    <!-- Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„ØªØ§Ø¬Ø± -->
                    <div class="seller-dashboard">
                        <div class="dashboard-header">
                            <h2><i class="fas fa-chart-line"></i> Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„ØªØ§Ø¬Ø±</h2>
                            <button class="btn btn-seller" onclick="showAddProductForm()">
                                <i class="fas fa-plus"></i> Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯
                            </button>
                        </div>
                        
                        <div class="dashboard-stats">
                            <div class="stat-card">
                                <div class="stat-value" id="totalProducts">0</div>
                                <div class="stat-label">Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="totalSales">0</div>
                                <div class="stat-label">Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="totalRevenue">0</div>
                                <div class="stat-label">Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯Ø§Øª (Ø±ÙŠØ§Ù„)</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="storeRating">0.0</div>
                                <div class="stat-label">ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…ØªØ¬Ø±</div>
                            </div>
                        </div>

                        <!-- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ù„Ù„ØªØ§Ø¬Ø± -->
                        <div class="manage-products" id="manageProductsSection">
                            <h3><i class="fas fa-boxes"></i> Ø¥Ø¯Ø§Ø±Ø© Ù…Ù†ØªØ¬Ø§ØªÙŠ</h3>
                            <div id="sellerProductsGrid" class="products-grid" style="margin-top: 20px;"></div>
                        </div>
                    </div>

                    <!-- Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯ -->
                    <div class="manage-products hidden" id="addProductForm">
                        <div class="dashboard-header">
                            <h2><i class="fas fa-plus-circle"></i> Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯</h2>
                            <button class="btn btn-outline" onclick="showManageProducts()">
                                <i class="fas fa-arrow-right"></i> Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
                            </button>
                        </div>
                        
                        <div class="product-form" style="background: var(--light); border-radius: var(--radius); padding: 25px; margin-bottom: 30px;">
                            <form id="newProductForm">
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                                    <div class="form-group">
                                        <label for="productName" class="form-label">Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬</label>
                                        <input type="text" id="productName" class="form-input" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="productCategory" class="form-label">Ø§Ù„ÙØ¦Ø©</label>
                                        <select id="productCategory" class="form-input" required>
                                            <option value="">Ø§Ø®ØªØ± Ø§Ù„ÙØ¦Ø©</option>
                                            <option value="Ù…ÙˆØ§Ø¯ ØºØ°Ø§Ø¦ÙŠØ©">Ù…ÙˆØ§Ø¯ ØºØ°Ø§Ø¦ÙŠØ©</option>
                                            <option value="Ù…Ù„Ø§Ø¨Ø³ ÙˆØ£Ø­Ø°ÙŠØ©">Ù…Ù„Ø§Ø¨Ø³ ÙˆØ£Ø­Ø°ÙŠØ©</option>
                                            <option value="Ø£Ø¬Ù‡Ø²Ø© Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©">Ø£Ø¬Ù‡Ø²Ø© Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©</option>
                                            <option value="Ø£Ø¯ÙˆØ§Øª Ù…Ù†Ø²Ù„ÙŠØ©">Ø£Ø¯ÙˆØ§Øª Ù…Ù†Ø²Ù„ÙŠØ©</option>
                                            <option value="Ù…Ø³ØªØ­Ø¶Ø±Ø§Øª ØªØ¬Ù…ÙŠÙ„">Ù…Ø³ØªØ­Ø¶Ø±Ø§Øª ØªØ¬Ù…ÙŠÙ„</option>
                                            <!-- Ø¥Ø¶Ø§ÙØ© ÙØ¦Ø§Øª Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„ØµÙ†Ø§Ø¹ÙŠØ© -->
                                            <option value="Ø§Ù„Ø­Ø¯ÙŠØ¯ ÙˆØ§Ù„ØµÙ„Ø¨">Ø§Ù„Ø­Ø¯ÙŠØ¯ ÙˆØ§Ù„ØµÙ„Ø¨</option>
                                            <option value="Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø¥Ù†Ø´Ø§Ø¦ÙŠØ©">Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø¥Ù†Ø´Ø§Ø¦ÙŠØ©</option>
                                            <option value="Ø§Ù„Ø¢Ù„Ø§Øª ÙˆØ§Ù„Ù…Ø¹Ø¯Ø§Øª">Ø§Ù„Ø¢Ù„Ø§Øª ÙˆØ§Ù„Ù…Ø¹Ø¯Ø§Øª</option>
                                            <option value="Ø§Ù„ÙƒÙŠÙ…Ø§ÙˆÙŠØ§Øª Ø§Ù„ØµÙ†Ø§Ø¹ÙŠØ©">Ø§Ù„ÙƒÙŠÙ…Ø§ÙˆÙŠØ§Øª Ø§Ù„ØµÙ†Ø§Ø¹ÙŠØ©</option>
                                            <option value="Ø§Ù„Ø·Ø§Ù‚Ø© ÙˆØ§Ù„Ù…ÙˆÙ„Ø¯Ø§Øª">Ø§Ù„Ø·Ø§Ù‚Ø© ÙˆØ§Ù„Ù…ÙˆÙ„Ø¯Ø§Øª</option>
                                            <option value="Ù…ÙˆØ§Ø¯ Ø§Ù„Ø¨Ù†Ø§Ø¡">Ù…ÙˆØ§Ø¯ Ø§Ù„Ø¨Ù†Ø§Ø¡</option>
                                            <option value="Ø§Ù„Ø£Ø³Ù„Ø§Ùƒ ÙˆØ§Ù„ÙƒØ§Ø¨Ù„Ø§Øª">Ø§Ù„Ø£Ø³Ù„Ø§Ùƒ ÙˆØ§Ù„ÙƒØ§Ø¨Ù„Ø§Øª</option>
                                            <option value="Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„ØµØ­ÙŠØ©">Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„ØµØ­ÙŠØ©</option>
                                            <option value="Ø§Ù„Ø£Ø®Ø´Ø§Ø¨">Ø§Ù„Ø£Ø®Ø´Ø§Ø¨</option>
                                            <option value="Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª ÙˆÙ‚Ø·Ø¹ Ø§Ù„ØºÙŠØ§Ø±">Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª ÙˆÙ‚Ø·Ø¹ Ø§Ù„ØºÙŠØ§Ø±</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                                    <div class="form-group">
                                        <label for="productPrice" class="form-label">Ø§Ù„Ø³Ø¹Ø± (Ø±ÙŠØ§Ù„)</label>
                                        <input type="number" id="productPrice" class="form-input" required min="1">
                                    </div>
                                    <div class="form-group">
                                        <label for="originalPrice" class="form-label">Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£ØµÙ„ÙŠ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
                                        <input type="number" id="originalPrice" class="form-input" min="1">
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label for="productDescription" class="form-label">ÙˆØµÙ Ø§Ù„Ù…Ù†ØªØ¬</label>
                                    <textarea id="productDescription" class="form-input" rows="3" required style="resize: vertical;"></textarea>
                                </div>
                                
                                <!-- ==================== Ù†Ø¸Ø§Ù… Ø±ÙØ¹ Ø§Ù„ØµÙˆØ± Ø§Ù„Ù…Ø­Ø³Ù† ==================== -->
                                <div class="form-group">
                                    <label class="form-label">
                                        <i class="fas fa-camera"></i> ØµÙˆØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬
                                    </label>
                                    
                                    <!-- Ø®ÙŠØ§Ø±Ø§Øª Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø© -->
                                    <div style="display: flex; flex-direction: column; gap: 15px; margin-bottom: 20px;">
                                        <!-- Ø§Ù„Ø®ÙŠØ§Ø± 1: Ø§Ù„ØªÙ‚Ø§Ø· ØµÙˆØ±Ø© Ø¬Ø¯ÙŠØ¯Ø© -->
                                        <div class="image-upload-option" 
                                             onclick="captureNewPhoto()"
                                             style="border: 2px solid var(--primary); background: rgba(255, 106, 0, 0.05);">
                                            <div style="font-size: 32px; color: var(--primary); margin-bottom: 10px;">
                                                <i class="fas fa-camera"></i>
                                            </div>
                                            <div style="font-weight: 600; color: var(--dark); margin-bottom: 5px;">
                                                Ø§Ù„ØªÙ‚Ø§Ø· ØµÙˆØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©
                                            </div>
                                            <div style="color: var(--gray); font-size: 14px;">
                                                Ø§ÙØªØ­ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ ÙˆØ§Ù„Ù‚Ø· ØµÙˆØ±Ø© Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù„Ù…Ù†ØªØ¬
                                            </div>
                                        </div>
                                        
                                        <!-- Ø§Ù„Ø®ÙŠØ§Ø± 2: Ø§Ø®ØªÙŠØ§Ø± Ù…Ù† Ø§Ù„Ù…Ø¹Ø±Ø¶ -->
                                        <div class="image-upload-option" 
                                             onclick="chooseFromGallery()"
                                             style="border: 2px solid var(--info); background: rgba(23, 162, 184, 0.05);">
                                            <div style="font-size: 32px; color: var(--info); margin-bottom: 10px;">
                                                <i class="fas fa-images"></i>
                                            </div>
                                            <div style="font-weight: 600; color: var(--dark); margin-bottom: 5px;">
                                                Ø§Ø®ØªÙŠØ§Ø± Ù…Ù† Ø§Ù„Ù…Ø¹Ø±Ø¶
                                            </div>
                                            <div style="color: var(--gray); font-size: 14px;">
                                                Ø§Ø®ØªØ± ØµÙˆØ±Ø© Ù…ÙˆØ¬ÙˆØ¯Ø© Ù…Ù† Ù…Ø¹Ø±Ø¶ Ù‡Ø§ØªÙÙƒ
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Ø­Ù‚Ù„ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù…Ø®ÙÙŠ -->
                                    <input type="file" 
                                           id="productImageFile" 
                                           accept="image/*" 
                                           style="display: none;">
                                    
                                    <!-- Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„ØµÙˆØ±Ø© -->
                                    <div class="image-preview-container" id="imagePreviewContainer">
                                        <p style="margin-bottom: 8px; font-weight: 600; color: var(--dark);">Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„ØµÙˆØ±Ø©:</p>
                                        <div style="position: relative; display: inline-block;">
                                            <img id="imagePreview" src="#" alt="Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„ØµÙˆØ±Ø©" class="image-preview">
                                            <button type="button" class="remove-image-btn" onclick="removeSelectedImage()">
                                                Ã—
                                            </button>
                                        </div>
                                        <div style="margin-top: 10px; color: var(--gray); font-size: 12px;" id="imageInfo">
                                            <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØµÙˆØ±Ø© ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ -->
                                        </div>
                                    </div>
                                    
                                    <!-- Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø¨Ø¯ÙŠÙ„ -->
                                    <div style="margin-top: 15px;">
                                        <label class="form-label" for="productImageUrl">
                                            <i class="fas fa-link"></i> Ø£Ùˆ Ø£Ø¯Ø®Ù„ Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø© ÙŠØ¯ÙˆÙŠØ§Ù‹
                                        </label>
                                        <input type="url" 
                                               id="productImageUrl" 
                                               class="form-input" 
                                               placeholder="https://example.com/image.jpg">
                                    </div>
                                </div>
                                
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                                    <div class="form-group">
                                        <label for="stockQuantity" class="form-label">Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…ØªØ§Ø­Ø©</label>
                                        <input type="number" id="stockQuantity" class="form-input" required min="1" value="10">
                                    </div>
                                    <div class="form-group" style="display: flex; align-items: center;">
                                        <input type="checkbox" id="isFeatured" style="margin-left: 10px;">
                                        <label for="isFeatured" class="form-label" style="margin-bottom: 0;">Ù…Ù†ØªØ¬ Ù…Ù…ÙŠØ²</label>
                                    </div>
                                </div>
                                
                                <button type="submit" class="btn btn-primary" style="width: 100%;">
                                    <i class="fas fa-save"></i> Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Ø§Ù„ÙÙˆØªØ± -->
        <footer class="footer">
            <div class="container">
                <div class="footer-grid">
                    <div class="footer-section">
                        <h3>Ø¨Ø§Ø¨Ø§ Ø§Ù„ÙŠÙ…Ù†</h3>
                        <p>Ø£ÙƒØ¨Ø± Ø³ÙˆÙ‚ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ÙÙŠ Ø§Ù„ÙŠÙ…Ù†ØŒ Ù†ÙˆÙØ± Ù„Ùƒ ØªØ¬Ø±Ø¨Ø© ØªØ³ÙˆÙ‚ Ø¢Ù…Ù†Ø© ÙˆØ³Ù‡Ù„Ø© Ù…Ø¹ Ø¢Ù„Ø§Ù Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ÙˆØ§Ù„Ù…ØªØ§Ø¬Ø±.</p>
                    </div>
                    
                    <div class="footer-section">
                        <h3>Ø±ÙˆØ§Ø¨Ø· Ø³Ø±ÙŠØ¹Ø©</h3>
                        <ul class="footer-links">
                            <li><a href="#" onclick="showAbout()">Ø¹Ù† Ø¨Ø§Ø¨Ø§ Ø§Ù„ÙŠÙ…Ù†</a></li>
                            <li><a href="#" onclick="showHowToSell()">ÙƒÙŠÙ Ø£Ø¨Ø¯Ø£ Ø§Ù„Ø¨ÙŠØ¹</a></li>
                            <li><a href="#" onclick="showHelp()">Ù…Ø±ÙƒØ² Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©</a></li>
                            <li><a href="#" onclick="showTerms()">Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù…</a></li>
                            <li><a href="#" onclick="showPrivacy()">Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©</a></li>
                        </ul>
                    </div>
                    
                    <div class="footer-section">
                        <h3>Ø®Ø¯Ù…Ø§ØªÙ†Ø§</h3>
                        <ul class="footer-links">
                            <li><a href="#" onclick="showHome()">Ø§Ù„Ù…ØªØ¬Ø± Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</a></li>
                            <li><a href="#" onclick="showMarketing()">Ø§Ù„ØªØ³ÙˆÙŠÙ‚ Ø§Ù„Ø±Ù‚Ù…ÙŠ</a></li>
                            <li><a href="#" onclick="showDelivery()">Ø®Ø¯Ù…Ø© Ø§Ù„ØªÙˆØµÙŠÙ„</a></li>
                            <li><a href="#" onclick="showPayment()">Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ø¢Ù…Ù†</a></li>
                            <li><a href="#" onclick="showSupport()">Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ</a></li>
                        </ul>
                    </div>
                    
                    <div class="footer-section">
                        <h3>Ø§ØªØµÙ„ Ø¨Ù†Ø§</h3>
                        <ul class="footer-links">
                            <li><i class="fas fa-map-marker-alt"></i> ØµÙ†Ø¹Ø§Ø¡ØŒ Ø§Ù„ÙŠÙ…Ù†</li>
                            <li><i class="fas fa-phone"></i> 777777777</li>
                            <li><i class="fas fa-envelope"></i> info@babayemen.com</li>
                            <li><i class="fas fa-clock"></i> 24/7 Ø®Ø¯Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</li>
                        </ul>
                    </div>
                </div>
                
                <div class="footer-bottom">
                    <p>Â© 2024 Ø¨Ø§Ø¨Ø§ Ø§Ù„ÙŠÙ…Ù†. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©.</p>
                </div>
            </div>
        </footer>

        <!-- Ø²Ø± Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ø£Ø¹Ù„Ù‰ -->
        <div class="scroll-to-top" id="scrollToTop">
            <i class="fas fa-chevron-up"></i>
        </div>
    </div>

    <!-- Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª -->
    <div id="notificationContainer"></div>

    <script>
        // ==================== Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ====================
        let currentUser = null;
        let accountType = 'buyer';
        let selectedImageFile = null;
        let isOnline = navigator.onLine;
        let currentView = 'home'; // 'home', 'category', 'store', 'cart', 'orders'

        // ==================== ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ====================
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            checkAuthStatus();
            setupEventListeners();
            setupEnhancedImageUpload();
            setupOfflineDetection();
            
            window.onerror = function(msg, url, line) {
                console.error('Ø®Ø·Ø£: ' + msg + ' ÙÙŠ ' + url + ':' + line);
                showNotification('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù…', 'error');
                return false;
            };
        });

        // ==================== Ø§ÙƒØªØ´Ø§Ù Ø­Ø§Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„ ====================
        function setupOfflineDetection() {
            window.addEventListener('online', function() {
                isOnline = true;
                showNotification('ØªÙ… Ø§Ø³ØªØ¹Ø§Ø¯Ø© Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª', 'success');
            });
            
            window.addEventListener('offline', function() {
                isOnline = false;
                showNotification('Ø£Ù†Øª ØªØ¹Ù…Ù„ Ø§Ù„Ø¢Ù† Ø¨Ø¯ÙˆÙ† Ø§ØªØµØ§Ù„ Ø¥Ù†ØªØ±Ù†Øª', 'warning');
            });
        }

        // ==================== Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø§Ù„Ø© Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© ====================
        function checkAuthStatus() {
            try {
                const userData = localStorage.getItem('babayemen_currentUser');
                if (userData) {
                    currentUser = JSON.parse(userData);
                    accountType = currentUser.accountType;
                    showMainApp();
                } else {
                    showAuthPage();
                }
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ù‚Ø±Ø§Ø¡Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:', error);
                showAuthPage();
            }
        }

        // ==================== ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ØµÙØ­Ø§Øª ====================
        function showAuthPage() {
            document.getElementById('authPage').classList.remove('hidden');
            document.getElementById('mainApp').classList.add('hidden');
        }

        function showMainApp() {
            document.getElementById('authPage').classList.add('hidden');
            document.getElementById('mainApp').classList.remove('hidden');
            
            updateUserInfo();
            loadUserInterface();
            showHome(); // Ø¹Ø±Ø¶ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ù…Ø¨Ø§Ø´Ø±Ø©
        }

        function updateUserInfo() {
            if (!currentUser) return;
            
            document.getElementById('userWelcome').textContent = `Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ ${currentUser.fullName}`;
            document.getElementById('userName').textContent = currentUser.fullName.split(' ')[0];
            document.getElementById('userAvatar').textContent = currentUser.fullName.charAt(0);
            
            const userTypeText = document.getElementById('userTypeText');
            const userTypeBadge = document.getElementById('userTypeBadge');
            
            if (currentUser.accountType === 'seller') {
                userTypeText.textContent = "Ø£Ù†Øª Ù…Ø³Ø¬Ù„ ÙƒØªØ§Ø¬Ø± ÙÙŠ Ù…Ù†ØµØ© Ø¨Ø§Ø¨Ø§ Ø§Ù„ÙŠÙ…Ù†";
                userTypeBadge.className = "user-type-badge seller";
                userTypeBadge.textContent = "ØªØ§Ø¬Ø±";
            } else {
                userTypeText.textContent = "Ø£Ù†Øª Ù…Ø³Ø¬Ù„ ÙƒÙ…Ø´ØªØ±ÙŠ ÙÙŠ Ù…Ù†ØµØ© Ø¨Ø§Ø¨Ø§ Ø§Ù„ÙŠÙ…Ù†";
                userTypeBadge.className = "user-type-badge buyer";
                userTypeBadge.textContent = "Ù…Ø´ØªØ±ÙŠ";
            }
        }

        function loadUserInterface() {
            if (currentUser.accountType === 'seller') {
                document.getElementById('buyerInterface').classList.add('hidden');
                document.getElementById('sellerInterface').classList.remove('hidden');
                loadSellerDashboard();
            } else {
                document.getElementById('sellerInterface').classList.add('hidden');
                document.getElementById('buyerInterface').classList.remove('hidden');
            }
        }

        // ==================== ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø´ØªØ±ÙŠ ====================
        function showHome() {
            currentView = 'home';
            document.getElementById('buyerInterface').innerHTML = `
                <!-- Ø§Ù„ÙØ¦Ø§Øª Ø§Ù„Ø³Ø±ÙŠØ¹Ø© -->
                <section class="categories-section">
                    <h2 class="section-title">
                        <i class="fas fa-tags"></i> Ø§Ù„ÙØ¦Ø§Øª
                    </h2>
                    <div class="categories-grid" id="categoriesGrid"></div>
                </section>

                <!-- Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø®Ø§ØµØ© -->
                <section class="offers-section">
                    <div class="section-header">
                        <h2 class="section-title">
                            <i class="fas fa-bolt"></i> Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø®Ø§ØµØ©
                        </h2>
                        <a href="#" class="view-all" onclick="showAllOffers()">
                            Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„ <i class="fas fa-arrow-left"></i>
                        </a>
                    </div>
                    <div class="offers-slider">
                        <div class="offer-slide">
                            <div class="offer-content">
                                <h2>ØªØ®ÙÙŠØ¶Ø§Øª Ø§Ù„Ù…ÙˆØ³Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯!</h2>
                                <p>Ø§Ø­ØµÙ„ Ø¹Ù„Ù‰ Ø®ØµÙ… ÙŠØµÙ„ Ø¥Ù„Ù‰ 50% Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</p>
                                <button class="offer-btn" onclick="showAllOffers()">ØªØ³ÙˆÙ‚ Ø§Ù„Ø¢Ù†</button>
                            </div>
                            <div class="offer-image">
                                <div style="width: 300px; height: 200px; background: rgba(255,255,255,0.2); border-radius: 10px; display: flex; align-items: center; justify-content: center; color: white; font-size: 48px;">
                                    <i class="fas fa-percent"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø´Ø§Ø¦Ø¹Ø© -->
                <section class="products-section">
                    <div class="section-header">
                        <h2 class="section-title">
                            <i class="fas fa-fire"></i> Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©
                        </h2>
                        <a href="#" class="view-all" onclick="showAllProducts()">
                            Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„ <i class="fas fa-arrow-left"></i>
                        </a>
                    </div>
                    <div class="products-grid" id="productsGrid"></div>
                </section>

                <!-- Ø§Ù„Ù…ØªØ§Ø¬Ø± Ø§Ù„Ù…Ù…ÙŠØ²Ø© -->
                <section class="stores-section">
                    <div class="section-header">
                        <h2 class="section-title">
                            <i class="fas fa-crown"></i> Ø§Ù„Ù…ØªØ§Ø¬Ø± Ø§Ù„Ù…Ù…ÙŠØ²Ø©
                        </h2>
                        <a href="#" class="view-all" onclick="showAllStores()">
                            Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„ <i class="fas fa-arrow-left"></i>
                        </a>
                    </div>
                    <div class="stores-grid" id="storesGrid"></div>
                </section>

                <!-- Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…Ø¶Ø§ÙØ© Ø­Ø¯ÙŠØ«Ø§Ù‹ -->
                <section class="products-section">
                    <div class="section-header">
                        <h2 class="section-title">
                            <i class="fas fa-clock"></i> Ø­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø¶Ø§ÙØ©
                        </h2>
                    </div>
                    <div class="products-grid" id="newProductsGrid"></div>
                </section>
            `;
            
            loadCategories();
            loadProducts();
            loadStores();
            loadNewProducts();
            updateCartCount();
        }

        function loadCategories() {
            const categories = [
                { id: 1, name: 'Ù…ÙˆØ§Ø¯ ØºØ°Ø§Ø¦ÙŠØ©', icon: 'fas fa-shopping-basket', color: '#28a745' },
                { id: 2, name: 'Ù…Ù„Ø§Ø¨Ø³ ÙˆØ£Ø­Ø°ÙŠØ©', icon: 'fas fa-tshirt', color: '#007bff' },
                { id: 3, name: 'Ø£Ø¬Ù‡Ø²Ø© Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©', icon: 'fas fa-laptop', color: '#6f42c1' },
                { id: 4, name: 'Ø£Ø¯ÙˆØ§Øª Ù…Ù†Ø²Ù„ÙŠØ©', icon: 'fas fa-home', color: '#e83e8c' },
                { id: 5, name: 'Ù…Ø³ØªØ­Ø¶Ø±Ø§Øª ØªØ¬Ù…ÙŠÙ„', icon: 'fas fa-spa', color: '#fd7e14' },
                { id: 6, name: 'Ø£Ø¯ÙˆØ§Øª Ø±ÙŠØ§Ø¶ÙŠØ©', icon: 'fas fa-dumbbell', color: '#20c997' },
                { id: 7, name: 'ÙƒØªØ¨ ÙˆÙ‚Ø±Ø·Ø§Ø³ÙŠØ©', icon: 'fas fa-book', color: '#17a2b8' },
                { id: 8, name: 'Ù‡Ø¯Ø§ÙŠØ§ ÙˆØ£Ù„Ø¹Ø§Ø¨', icon: 'fas fa-gift', color: '#dc3545' },
                { id: 9, name: 'Ø§Ù„Ø­Ø¯ÙŠØ¯ ÙˆØ§Ù„ØµÙ„Ø¨', icon: 'fas fa-industry', color: '#2c3e50' },
                { id: 10, name: 'Ù…ÙˆØ§Ø¯ Ø§Ù„Ø¨Ù†Ø§Ø¡', icon: 'fas fa-hammer', color: '#8e44ad' },
                { id: 11, name: 'Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª', icon: 'fas fa-car', color: '#c0392b' },
                { id: 12, name: 'Ø§Ù„Ø·Ø§Ù‚Ø©', icon: 'fas fa-bolt', color: '#f39c12' }
            ];
            
            const grid = document.getElementById('categoriesGrid');
            if (!grid) return;
            
            grid.innerHTML = categories.map(cat => `
                <div class="category-card" onclick="showCategory('${cat.name}')">
                    <div class="category-icon" style="background: ${cat.color}20; color: ${cat.color};">
                        <i class="${cat.icon}"></i>
                    </div>
                    <h3>${cat.name}</h3>
                </div>
            `).join('');
        }

        function loadProducts() {
            try {
                const products = JSON.parse(localStorage.getItem('babayemen_products') || '[]');
                const popularProducts = products.filter(p => p.isFeatured).slice(0, 8);
                
                const grid = document.getElementById('productsGrid');
                if (!grid) return;
                
                grid.innerHTML = popularProducts.map(product => `
                    <div class="product-card">
                        ${product.isNew ? '<span class="product-badge">Ø¬Ø¯ÙŠØ¯</span>' : ''}
                        <div class="product-image">
                            ${getProductIcon(product.category)}
                        </div>
                        <div class="product-info">
                            <div class="product-category">${product.category}</div>
                            <h3 class="product-title">${product.name}</h3>
                            <p class="product-description">${product.description.substring(0, 50)}...</p>
                            <div class="product-price">
                                <span class="current-price">${product.price.toLocaleString()} Ø±ÙŠØ§Ù„</span>
                                ${product.originalPrice > product.price ? 
                                    `<span class="original-price">${product.originalPrice.toLocaleString()} Ø±ÙŠØ§Ù„</span>` : ''}
                            </div>
                            <div class="product-rating">
                                <div class="stars">
                                    ${generateStars(product.rating)}
                                </div>
                                <span class="rating-count">(${product.reviews})</span>
                            </div>
                            <div class="product-actions">
                                <button class="btn btn-whatsapp" onclick="contactSellerOnWhatsApp('${product.id}', event)">
                                    <i class="fab fa-whatsapp"></i> ØªÙˆØ§ØµÙ„
                                </button>
                                <button class="btn btn-outline" onclick="addToWishlist('${product.id}')">
                                    <i class="far fa-heart"></i>
                                </button>
                                <button class="btn btn-primary" onclick="addToCart('${product.id}')">
                                    <i class="fas fa-cart-plus"></i> Ø³Ù„Ø©
                                </button>
                            </div>
                        </div>
                    </div>
                `).join('');
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:', error);
            }
        }

        function loadNewProducts() {
            try {
                const products = JSON.parse(localStorage.getItem('babayemen_products') || '[]');
                const newProducts = products.filter(p => p.isNew).slice(0, 8);
                
                const grid = document.getElementById('newProductsGrid');
                if (!grid) return;
                
                grid.innerHTML = newProducts.map(product => `
                    <div class="product-card">
                        <span class="product-badge">Ø¬Ø¯ÙŠØ¯</span>
                        <div class="product-image">
                            ${getProductIcon(product.category)}
                        </div>
                        <div class="product-info">
                            <div class="product-category">${product.category}</div>
                            <h3 class="product-title">${product.name}</h3>
                            <p class="product-description">${product.description.substring(0, 50)}...</p>
                            <div class="product-price">
                                <span class="current-price">${product.price.toLocaleString()} Ø±ÙŠØ§Ù„</span>
                                ${product.originalPrice > product.price ? 
                                    `<span class="original-price">${product.originalPrice.toLocaleString()} Ø±ÙŠØ§Ù„</span>` : ''}
                            </div>
                            <div class="product-rating">
                                <div class="stars">
                                    ${generateStars(product.rating)}
                                </div>
                                <span class="rating-count">(${product.reviews})</span>
                            </div>
                            <div class="product-actions">
                                <button class="btn btn-whatsapp" onclick="contactSellerOnWhatsApp('${product.id}', event)">
                                    <i class="fab fa-whatsapp"></i> ØªÙˆØ§ØµÙ„
                                </button>
                                <button class="btn btn-outline" onclick="addToWishlist('${product.id}')">
                                    <i class="far fa-heart"></i>
                                </button>
                                <button class="btn btn-primary" onclick="addToCart('${product.id}')">
                                    <i class="fas fa-cart-plus"></i> Ø³Ù„Ø©
                                </button>
                            </div>
                        </div>
                    </div>
                `).join('');
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©:', error);
            }
        }

        function loadStores() {
            const stores = [
                {
                    id: 'store_1',
                    name: 'Ù…ØªØ¬Ø± Ø§Ù„Ø£Ø­Ù…Ø¯ÙŠ',
                    category: 'Ù…ÙˆØ§Ø¯ ØºØ°Ø§Ø¦ÙŠØ©',
                    rating: 4.8,
                    products: 150,
                    joined: '2023',
                    logo: 'fas fa-store',
                    owner: 'Ù…Ø­Ù…Ø¯ Ø§Ù„Ø£Ø­Ù…Ø¯ÙŠ',
                    phone: '771111111'
                },
                {
                    id: 'store_2',
                    name: 'ØªÙƒÙ†Ùˆ Ù…Ø§Ø±Øª',
                    category: 'Ø£Ø¬Ù‡Ø²Ø© Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©',
                    rating: 4.6,
                    products: 89,
                    joined: '2022',
                    logo: 'fas fa-laptop',
                    owner: 'Ø£Ø­Ù…Ø¯ Ø§Ù„ØªÙƒÙ†Ùˆ',
                    phone: '772222222'
                },
                {
                    id: 'store_3',
                    name: 'Ø¨ÙŠØª Ø§Ù„Ø±ÙŠØ§Ø¶Ø©',
                    category: 'Ø£Ø¯ÙˆØ§Øª Ø±ÙŠØ§Ø¶ÙŠØ©',
                    rating: 4.7,
                    products: 67,
                    joined: '2023',
                    logo: 'fas fa-dumbbell',
                    owner: 'Ø³Ø¹ÙŠØ¯ Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠ',
                    phone: '773333333'
                },
                {
                    id: 'store_4',
                    name: 'Ù…ØµÙ†Ø¹ Ø§Ù„Ø­Ø¯ÙŠØ¯ Ø§Ù„ÙˆØ·Ù†ÙŠ',
                    category: 'Ø§Ù„Ø­Ø¯ÙŠØ¯ ÙˆØ§Ù„ØµÙ„Ø¨',
                    rating: 4.9,
                    products: 45,
                    joined: '2022',
                    logo: 'fas fa-industry',
                    owner: 'Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø§Ù„ØµÙ†Ø§Ø¹ÙŠ',
                    phone: '774444444'
                },
                {
                    id: 'store_5',
                    name: 'Ù…ÙˆØ§Ø¯ Ø§Ù„Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù…ØªØ­Ø¯Ø©',
                    category: 'Ù…ÙˆØ§Ø¯ Ø§Ù„Ø¨Ù†Ø§Ø¡',
                    rating: 4.5,
                    products: 120,
                    joined: '2023',
                    logo: 'fas fa-hammer',
                    owner: 'Ø®Ø§Ù„Ø¯ Ø§Ù„Ø¨Ù†Ø§Ø¡',
                    phone: '775555555'
                }
            ];
            
            const grid = document.getElementById('storesGrid');
            if (!grid) return;
            
            grid.innerHTML = stores.map(store => `
                <div class="store-card" onclick="showStore('${store.id}')" style="background: white; border-radius: var(--radius); padding: 20px; box-shadow: var(--shadow); display: flex; align-items: center; gap: 20px; transition: var(--transition);">
                    <div class="store-logo" style="width: 80px; height: 80px; background: var(--light); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 32px; color: var(--primary);">
                        <i class="${store.logo}"></i>
                    </div>
                    <div class="store-info">
                        <h3 style="font-size: 18px; margin-bottom: 5px;">${store.name}</h3>
                        <div class="store-rating" style="display: flex; align-items: center; gap: 5px; margin-bottom: 10px;">
                            ${generateStars(store.rating)}
                            <span>${store.rating}</span>
                        </div>
                        <div class="store-category" style="color: var(--gray); font-size: 14px;">${store.category}</div>
                        <div style="font-size: 12px; color: var(--gray); margin-top: 5px;">
                            ${store.products} Ù…Ù†ØªØ¬ | Ù…Ù†Ø° ${store.joined}
                        </div>
                        <div style="margin-top: 10px;">
                            <button class="btn btn-whatsapp" style="padding: 8px 15px; font-size: 14px;" 
                                    onclick="contactStoreOnWhatsApp('${store.id}', event)">
                                <i class="fab fa-whatsapp"></i> ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ù…ØªØ¬Ø±
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // Ø¯Ø§Ù„Ø© Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø§Ù„Ù…Ù†ØªØ¬ Ø­Ø³Ø¨ Ø§Ù„ÙØ¦Ø©
        function getProductIcon(category) {
            const icons = {
                'Ù…ÙˆØ§Ø¯ ØºØ°Ø§Ø¦ÙŠØ©': 'fas fa-shopping-basket',
                'Ù…Ù„Ø§Ø¨Ø³ ÙˆØ£Ø­Ø°ÙŠØ©': 'fas fa-tshirt',
                'Ø£Ø¬Ù‡Ø²Ø© Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©': 'fas fa-laptop',
                'Ø£Ø¯ÙˆØ§Øª Ù…Ù†Ø²Ù„ÙŠØ©': 'fas fa-home',
                'Ù…Ø³ØªØ­Ø¶Ø±Ø§Øª ØªØ¬Ù…ÙŠÙ„': 'fas fa-spa',
                'Ø§Ù„Ø­Ø¯ÙŠØ¯ ÙˆØ§Ù„ØµÙ„Ø¨': 'fas fa-industry',
                'Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø¥Ù†Ø´Ø§Ø¦ÙŠØ©': 'fas fa-cubes',
                'Ø§Ù„Ø¢Ù„Ø§Øª ÙˆØ§Ù„Ù…Ø¹Ø¯Ø§Øª': 'fas fa-cogs',
                'Ø§Ù„ÙƒÙŠÙ…Ø§ÙˆÙŠØ§Øª Ø§Ù„ØµÙ†Ø§Ø¹ÙŠØ©': 'fas fa-flask',
                'Ø§Ù„Ø·Ø§Ù‚Ø© ÙˆØ§Ù„Ù…ÙˆÙ„Ø¯Ø§Øª': 'fas fa-bolt',
                'Ù…ÙˆØ§Ø¯ Ø§Ù„Ø¨Ù†Ø§Ø¡': 'fas fa-hammer',
                'Ø§Ù„Ø£Ø³Ù„Ø§Ùƒ ÙˆØ§Ù„ÙƒØ§Ø¨Ù„Ø§Øª': 'fas fa-bolt',
                'Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„ØµØ­ÙŠØ©': 'fas fa-faucet',
                'Ø§Ù„Ø£Ø®Ø´Ø§Ø¨': 'fas fa-tree',
                'Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª ÙˆÙ‚Ø·Ø¹ Ø§Ù„ØºÙŠØ§Ø±': 'fas fa-car'
            };
            
            const iconClass = icons[category] || 'fas fa-box';
            return `<i class="${iconClass}"></i>`;
        }

        // ==================== Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø­Ø³Ø¨ Ø§Ù„ÙØ¦Ø© ====================
        function showCategory(categoryName) {
            currentView = 'category';
            
            try {
                const products = JSON.parse(localStorage.getItem('babayemen_products') || '[]');
                const categoryProducts = products.filter(p => p.category === categoryName);
                
                document.getElementById('buyerInterface').innerHTML = `
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 20px;">
                        <button class="btn btn-outline" onclick="showHome()">
                            <i class="fas fa-arrow-right"></i> Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
                        </button>
                        <h2 class="section-title">
                            <i class="fas fa-tag"></i> Ù…Ù†ØªØ¬Ø§Øª ${categoryName}
                            <span style="font-size: 16px; color: var(--gray); margin-right: 10px;">
                                (${categoryProducts.length} Ù…Ù†ØªØ¬)
                            </span>
                        </h2>
                    </div>
                    
                    <div class="products-grid" id="categoryProductsGrid"></div>
                    
                    ${categoryProducts.length === 0 ? `
                        <div style="text-align: center; padding: 50px; background: white; border-radius: var(--radius); box-shadow: var(--shadow);">
                            <i class="fas fa-box-open" style="font-size: 64px; color: var(--light-gray); margin-bottom: 20px;"></i>
                            <h3 style="color: var(--gray); margin-bottom: 10px;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„ÙØ¦Ø©</h3>
                            <p style="color: var(--gray);">Ù„Ù… ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬Ø§Øª ÙÙŠ ÙØ¦Ø© ${categoryName} Ø¨Ø¹Ø¯.</p>
                            <button class="btn btn-primary" onclick="showHome()" style="margin-top: 20px;">
                                <i class="fas fa-home"></i> Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
                            </button>
                        </div>
                    ` : ''}
                `;
                
                if (categoryProducts.length > 0) {
                    const grid = document.getElementById('categoryProductsGrid');
                    if (grid) {
                        grid.innerHTML = categoryProducts.map(product => `
                            <div class="product-card">
                                ${product.isNew ? '<span class="product-badge">Ø¬Ø¯ÙŠØ¯</span>' : ''}
                                <div class="product-image">
                                    ${getProductIcon(product.category)}
                                </div>
                                <div class="product-info">
                                    <div class="product-category">${product.category}</div>
                                    <h3 class="product-title">${product.name}</h3>
                                    <p class="product-description">${product.description.substring(0, 50)}...</p>
                                    <div class="product-price">
                                        <span class="current-price">${product.price.toLocaleString()} Ø±ÙŠØ§Ù„</span>
                                        ${product.originalPrice > product.price ? 
                                            `<span class="original-price">${product.originalPrice.toLocaleString()} Ø±ÙŠØ§Ù„</span>` : ''}
                                    </div>
                                    <div class="product-rating">
                                        <div class="stars">
                                            ${generateStars(product.rating)}
                                        </div>
                                        <span class="rating-count">(${product.reviews})</span>
                                    </div>
                                    <div class="product-actions">
                                        <button class="btn btn-whatsapp" onclick="contactSellerOnWhatsApp('${product.id}', event)">
                                            <i class="fab fa-whatsapp"></i> ØªÙˆØ§ØµÙ„
                                        </button>
                                        <button class="btn btn-outline" onclick="addToWishlist('${product.id}')">
                                            <i class="far fa-heart"></i>
                                        </button>
                                        <button class="btn btn-primary" onclick="addToCart('${product.id}')">
                                            <i class="fas fa-cart-plus"></i> Ø³Ù„Ø©
                                        </button>
                                    </div>
                                </div>
                            </div>
                        `).join('');
                    }
                }
                
                updateCartCount();
                showNotification(`Ø¹Ø±Ø¶ Ù…Ù†ØªØ¬Ø§Øª ${categoryName}`, 'success');
                
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ø¹Ø±Ø¶ Ø§Ù„ÙØ¦Ø©:', error);
                showNotification('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª', 'error');
            }
        }

        // ==================== Ø¹Ø±Ø¶ Ø§Ù„Ù…ØªØ¬Ø± ====================
        function showStore(storeId) {
            currentView = 'store';
            
            const stores = [
                {
                    id: 'store_1',
                    name: 'Ù…ØªØ¬Ø± Ø§Ù„Ø£Ø­Ù…Ø¯ÙŠ',
                    category: 'Ù…ÙˆØ§Ø¯ ØºØ°Ø§Ø¦ÙŠØ©',
                    rating: 4.8,
                    products: 150,
                    joined: '2023',
                    logo: 'fas fa-store',
                    owner: 'Ù…Ø­Ù…Ø¯ Ø§Ù„Ø£Ø­Ù…Ø¯ÙŠ',
                    phone: '771111111',
                    description: 'Ù…ØªØ¬Ø± Ù…ØªØ®ØµØµ ÙÙŠ Ø¨ÙŠØ¹ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„ØºØ°Ø§Ø¦ÙŠØ© ÙˆØ§Ù„Ø§Ø³ØªÙ‡Ù„Ø§ÙƒÙŠØ© Ø¨Ø¬ÙˆØ¯Ø© Ø¹Ø§Ù„ÙŠØ© ÙˆØ£Ø³Ø¹Ø§Ø± Ù…Ù†Ø§Ø³Ø¨Ø©.'
                },
                {
                    id: 'store_2',
                    name: 'ØªÙƒÙ†Ùˆ Ù…Ø§Ø±Øª',
                    category: 'Ø£Ø¬Ù‡Ø²Ø© Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©',
                    rating: 4.6,
                    products: 89,
                    joined: '2022',
                    logo: 'fas fa-laptop',
                    owner: 'Ø£Ø­Ù…Ø¯ Ø§Ù„ØªÙƒÙ†Ùˆ',
                    phone: '772222222',
                    description: 'Ù…ØªØ¬Ø± Ø§Ù„Ø£Ø¬Ù‡Ø²Ø© Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ© ÙˆØ§Ù„ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ© Ø¨Ù…Ø§Ø±ÙƒØ§Øª Ø¹Ø§Ù„Ù…ÙŠØ© ÙˆØ¶Ù…Ø§Ù†.'
                },
                {
                    id: 'store_3',
                    name: 'Ø¨ÙŠØª Ø§Ù„Ø±ÙŠØ§Ø¶Ø©',
                    category: 'Ø£Ø¯ÙˆØ§Øª Ø±ÙŠØ§Ø¶ÙŠØ©',
                    rating: 4.7,
                    products: 67,
                    joined: '2023',
                    logo: 'fas fa-dumbbell',
                    owner: 'Ø³Ø¹ÙŠØ¯ Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠ',
                    phone: '773333333',
                    description: 'Ø£ÙƒØ¨Ø± Ù…ØªØ¬Ø± Ù„Ù„Ø£Ø¯ÙˆØ§Øª ÙˆØ§Ù„Ù…Ø³ØªÙ„Ø²Ù…Ø§Øª Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ© Ø¨Ø¬Ù…ÙŠØ¹ Ø£Ù†ÙˆØ§Ø¹Ù‡Ø§.'
                },
                {
                    id: 'store_4',
                    name: 'Ù…ØµÙ†Ø¹ Ø§Ù„Ø­Ø¯ÙŠØ¯ Ø§Ù„ÙˆØ·Ù†ÙŠ',
                    category: 'Ø§Ù„Ø­Ø¯ÙŠØ¯ ÙˆØ§Ù„ØµÙ„Ø¨',
                    rating: 4.9,
                    products: 45,
                    joined: '2022',
                    logo: 'fas fa-industry',
                    owner: 'Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡ Ø§Ù„ØµÙ†Ø§Ø¹ÙŠ',
                    phone: '774444444',
                    description: 'Ù…ØµÙ†Ø¹ Ù…ØªØ®ØµØµ ÙÙŠ Ø¥Ù†ØªØ§Ø¬ ÙˆØªÙˆØ±ÙŠØ¯ Ø§Ù„Ø­Ø¯ÙŠØ¯ ÙˆØ§Ù„ØµÙ„Ø¨ Ø¨Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù‚Ø§Ø³Ø§Øª.'
                },
                {
                    id: 'store_5',
                    name: 'Ù…ÙˆØ§Ø¯ Ø§Ù„Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù…ØªØ­Ø¯Ø©',
                    category: 'Ù…ÙˆØ§Ø¯ Ø§Ù„Ø¨Ù†Ø§Ø¡',
                    rating: 4.5,
                    products: 120,
                    joined: '2023',
                    logo: 'fas fa-hammer',
                    owner: 'Ø®Ø§Ù„Ø¯ Ø§Ù„Ø¨Ù†Ø§Ø¡',
                    phone: '775555555',
                    description: 'Ù…ØªØ¬Ø± Ù…ÙˆØ§Ø¯ Ø§Ù„Ø¨Ù†Ø§Ø¡ ÙˆØ§Ù„ØªØ´ÙŠÙŠØ¯ Ø¨Ø¬Ù…ÙŠØ¹ Ø£Ù†ÙˆØ§Ø¹Ù‡Ø§ ÙˆØ£ÙØ¶Ù„ Ø§Ù„Ø£Ø³Ø¹Ø§Ø±.'
                }
            ];
            
            const store = stores.find(s => s.id === storeId);
            
            if (!store) {
                showNotification('Ø§Ù„Ù…ØªØ¬Ø± ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯', 'error');
                showHome();
                return;
            }
            
            try {
                const products = JSON.parse(localStorage.getItem('babayemen_products') || '[]');
                const storeProducts = products.filter(p => p.seller === store.name);
                
                document.getElementById('buyerInterface').innerHTML = `
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 20px;">
                        <button class="btn btn-outline" onclick="showHome()">
                            <i class="fas fa-arrow-right"></i> Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
                        </button>
                    </div>
                    
                    <div class="seller-dashboard">
                        <div class="dashboard-header">
                            <div style="display: flex; align-items: center; gap: 20px;">
                                <div class="store-logo" style="width: 100px; height: 100px; background: var(--light); border-radius: 20px; display: flex; align-items: center; justify-content: center; font-size: 48px; color: var(--primary);">
                                    <i class="${store.logo}"></i>
                                </div>
                                <div>
                                    <h2>${store.name}</h2>
                                    <div style="display: flex; align-items: center; gap: 10px; margin-top: 10px;">
                                        <div class="store-rating" style="display: flex; align-items: center; gap: 5px;">
                                            ${generateStars(store.rating)}
                                            <span>${store.rating}</span>
                                        </div>
                                        <span style="color: var(--gray);">|</span>
                                        <span style="color: var(--gray);">${store.category}</span>
                                        <span style="color: var(--gray);">|</span>
                                        <span style="color: var(--gray);">Ù…Ù†Ø° ${store.joined}</span>
                                    </div>
                                </div>
                            </div>
                            <button class="btn btn-whatsapp" onclick="contactStoreOnWhatsApp('${store.id}', event)">
                                <i class="fab fa-whatsapp"></i> ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ù…ØªØ¬Ø±
                            </button>
                        </div>
                        
                        <div style="margin: 20px 0; padding: 20px; background: var(--light); border-radius: var(--radius);">
                            <h3 style="margin-bottom: 10px;">Ø¹Ù† Ø§Ù„Ù…ØªØ¬Ø±</h3>
                            <p style="color: var(--gray); line-height: 1.6;">${store.description}</p>
                        </div>
                        
                        <div class="dashboard-stats">
                            <div class="stat-card">
                                <div class="stat-value">${store.products}</div>
                                <div class="stat-label">Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value">${store.rating}</div>
                                <div class="stat-label">Ø§Ù„ØªÙ‚ÙŠÙŠÙ…</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value">${store.phone}</div>
                                <div class="stat-label">Ø±Ù‚Ù… Ø§Ù„ØªÙˆØ§ØµÙ„</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value">${store.owner}</div>
                                <div class="stat-label">Ø§Ù„Ù…Ø§Ù„Ùƒ</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="manage-products">
                        <h3><i class="fas fa-boxes"></i> Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…ØªØ¬Ø±</h3>
                        ${storeProducts.length === 0 ? `
                            <div style="text-align: center; padding: 40px;">
                                <i class="fas fa-box-open" style="font-size: 64px; color: var(--light-gray); margin-bottom: 20px;"></i>
                                <h3 style="color: var(--gray); margin-bottom: 10px;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…ØªØ¬Ø±</h3>
                                <p style="color: var(--gray);">Ù„Ù… ÙŠÙ‚Ù… ${store.name} Ø¨Ø¥Ø¶Ø§ÙØ© Ø£ÙŠ Ù…Ù†ØªØ¬Ø§Øª Ø¨Ø¹Ø¯.</p>
                            </div>
                        ` : `
                            <div class="products-grid" id="storeProductsGrid" style="margin-top: 20px;"></div>
                        `}
                    </div>
                `;
                
                if (storeProducts.length > 0) {
                    const grid = document.getElementById('storeProductsGrid');
                    if (grid) {
                        grid.innerHTML = storeProducts.map(product => `
                            <div class="product-card">
                                ${product.isNew ? '<span class="product-badge">Ø¬Ø¯ÙŠØ¯</span>' : ''}
                                <div class="product-image">
                                    ${getProductIcon(product.category)}
                                </div>
                                <div class="product-info">
                                    <div class="product-category">${product.category}</div>
                                    <h3 class="product-title">${product.name}</h3>
                                    <p class="product-description">${product.description.substring(0, 50)}...</p>
                                    <div class="product-price">
                                        <span class="current-price">${product.price.toLocaleString()} Ø±ÙŠØ§Ù„</span>
                                        ${product.originalPrice > product.price ? 
                                            `<span class="original-price">${product.originalPrice.toLocaleString()} Ø±ÙŠØ§Ù„</span>` : ''}
                                    </div>
                                    <div class="product-rating">
                                        <div class="stars">
                                            ${generateStars(product.rating)}
                                        </div>
                                        <span class="rating-count">(${product.reviews})</span>
                                    </div>
                                    <div class="product-actions">
                                        <button class="btn btn-whatsapp" onclick="contactSellerOnWhatsApp('${product.id}', event)">
                                            <i class="fab fa-whatsapp"></i> ØªÙˆØ§ØµÙ„
                                        </button>
                                        <button class="btn btn-outline" onclick="addToWishlist('${product.id}')">
                                            <i class="far fa-heart"></i>
                                        </button>
                                        <button class="btn btn-primary" onclick="addToCart('${product.id}')">
                                            <i class="fas fa-cart-plus"></i> Ø³Ù„Ø©
                                        </button>
                                    </div>
                                </div>
                            </div>
                        `).join('');
                    }
                }
                
                updateCartCount();
                showNotification(`Ø¹Ø±Ø¶ Ù…Ù†ØªØ¬Ø§Øª ${store.name}`, 'success');
                
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ø¹Ø±Ø¶ Ø§Ù„Ù…ØªØ¬Ø±:', error);
                showNotification('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¹Ø±Ø¶ Ø§Ù„Ù…ØªØ¬Ø±', 'error');
            }
        }

        // ==================== Ù…ÙŠØ²Ø© Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„ØªØ§Ø¬Ø± Ø¹Ø¨Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ ====================
        function contactSellerOnWhatsApp(productId, event) {
            if (event) event.stopPropagation();
            
            try {
                const products = JSON.parse(localStorage.getItem('babayemen_products') || '[]');
                const product = products.find(p => p.id === productId);
                
                if (!product) {
                    showNotification('Ø§Ù„Ù…Ù†ØªØ¬ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯', 'error');
                    return;
                }
                
                const sellerPhone = product.sellerPhone || '771234567';
                const message = `Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ Ø£Ù†Ø§ Ù…Ù‡ØªÙ… Ø¨Ù…Ù†ØªØ¬: ${product.name}\nØ§Ù„Ø³Ø¹Ø±: ${product.price} Ø±ÙŠØ§Ù„\nØ£Ø±ÙŠØ¯ Ø§Ù„Ø§Ø³ØªÙØ³Ø§Ø± Ø¹Ù†:`;
                
                if (isOnline) {
                    const whatsappUrl = `https://wa.me/${sellerPhone}?text=${encodeURIComponent(message)}`;
                    window.open(whatsappUrl, '_blank');
                    showNotification('ÙŠØªÙ… ÙØªØ­ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ù„Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„ØªØ§Ø¬Ø±', 'info');
                } else {
                    showNotification('Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª. Ø±Ù‚Ù… Ø§Ù„ØªÙˆØ§ØµÙ„: ' + sellerPhone, 'warning');
                }
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¨Ø§Ø¦Ø¹:', error);
                showNotification('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¨Ø§Ø¦Ø¹', 'error');
            }
        }

        function contactStoreOnWhatsApp(storeId, event) {
            if (event) event.stopPropagation();
            
            try {
                const stores = [
                    { id: 'store_1', name: 'Ù…ØªØ¬Ø± Ø§Ù„Ø£Ø­Ù…Ø¯ÙŠ', phone: '771111111' },
                    { id: 'store_2', name: 'ØªÙƒÙ†Ùˆ Ù…Ø§Ø±Øª', phone: '772222222' },
                    { id: 'store_3', name: 'Ø¨ÙŠØª Ø§Ù„Ø±ÙŠØ§Ø¶Ø©', phone: '773333333' },
                    { id: 'store_4', name: 'Ù…ØµÙ†Ø¹ Ø§Ù„Ø­Ø¯ÙŠØ¯ Ø§Ù„ÙˆØ·Ù†ÙŠ', phone: '774444444' },
                    { id: 'store_5', name: 'Ù…ÙˆØ§Ø¯ Ø§Ù„Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù…ØªØ­Ø¯Ø©', phone: '775555555' }
                ];
                
                const store = stores.find(s => s.id === storeId);
                
                if (!store) {
                    showNotification('Ø§Ù„Ù…ØªØ¬Ø± ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯', 'error');
                    return;
                }
                
                const message = `Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ Ø£Ù†Ø§ Ù…Ù‡ØªÙ… Ø¨Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ÙÙŠ Ù…ØªØ¬Ø±: ${store.name}\nØ£Ø±ÙŠØ¯ Ø§Ù„Ø§Ø³ØªÙØ³Ø§Ø± Ø¹Ù† Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø© ÙˆØ§Ù„Ø£Ø³Ø¹Ø§Ø±:`;
                
                if (isOnline) {
                    const whatsappUrl = `https://wa.me/${store.phone}?text=${encodeURIComponent(message)}`;
                    window.open(whatsappUrl, '_blank');
                    showNotification('ÙŠØªÙ… ÙØªØ­ ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ù„Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ù…ØªØ¬Ø±', 'info');
                } else {
                    showNotification('Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª. Ø±Ù‚Ù… Ø§Ù„ØªÙˆØ§ØµÙ„: ' + store.phone, 'warning');
                }
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ù…ØªØ¬Ø±:', error);
                showNotification('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ù…ØªØ¬Ø±', 'error');
            }
        }

        // ==================== ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„ØªØ§Ø¬Ø± ====================
        function loadSellerDashboard() {
            loadSellerProducts();
            updateSellerStats();
        }

        function loadSellerProducts() {
            try {
                const products = JSON.parse(localStorage.getItem('babayemen_products') || '[]');
                const sellerProducts = products.filter(product => 
                    product.sellerId === currentUser.id || product.seller === currentUser.storeName
                );
                
                const grid = document.getElementById('sellerProductsGrid');
                if (!grid) return;
                
                if (sellerProducts.length === 0) {
                    grid.innerHTML = `
                        <div style="grid-column: 1/-1; text-align: center; padding: 40px;">
                            <i class="fas fa-box-open" style="font-size: 64px; color: var(--light-gray); margin-bottom: 20px;"></i>
                            <h3 style="color: var(--gray); margin-bottom: 10px;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª</h3>
                            <p style="color: var(--gray);">Ù„Ù… ØªÙ‚Ù… Ø¨Ø¥Ø¶Ø§ÙØ© Ø£ÙŠ Ù…Ù†ØªØ¬Ø§Øª Ø¨Ø¹Ø¯!</p>
                            <button class="btn btn-primary" onclick="showAddProductForm()" style="margin-top: 20px;">
                                <i class="fas fa-plus"></i> Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯
                            </button>
                        </div>
                    `;
                } else {
                    grid.innerHTML = sellerProducts.map(product => `
                        <div class="product-card">
                            <div class="product-image">
                                ${getProductIcon(product.category)}
                            </div>
                            <div class="product-info">
                                <div class="product-category">${product.category}</div>
                                <h3 class="product-title">${product.name}</h3>
                                <p class="product-description">${product.description.substring(0, 50)}...</p>
                                <div class="product-price">
                                    <span class="current-price">${product.price.toLocaleString()} Ø±ÙŠØ§Ù„</span>
                                </div>
                                <div style="font-size: 12px; color: var(--gray); margin-bottom: 10px;">
                                    Ø§Ù„ÙƒÙ…ÙŠØ©: ${product.stock || 10} | Ø§Ù„Ù…Ø´ØªØ±ÙŠØ§Øª: ${product.sales || 0}
                                </div>
                                <div class="product-actions">
                                    <button class="btn btn-outline" onclick="editProduct('${product.id}')">
                                        <i class="fas fa-edit"></i> ØªØ¹Ø¯ÙŠÙ„
                                    </button>
                                    <button class="btn btn-primary" onclick="deleteProduct('${product.id}')">
                                        <i class="fas fa-trash"></i> Ø­Ø°Ù
                                    </button>
                                </div>
                            </div>
                        </div>
                    `).join('');
                }
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„ØªØ§Ø¬Ø±:', error);
            }
        }

        function updateSellerStats() {
            try {
                const products = JSON.parse(localStorage.getItem('babayemen_products') || '[]');
                const sellerProducts = products.filter(product => 
                    product.sellerId === currentUser.id || product.seller === currentUser.storeName
                );
                
                const totalProducts = sellerProducts.length;
                const totalSales = sellerProducts.reduce((sum, product) => sum + (product.sales || 0), 0);
                const totalRevenue = sellerProducts.reduce((sum, product) => 
                    sum + (product.price * (product.sales || 0)), 0
                );
                const storeRating = sellerProducts.length > 0 ? 
                    (sellerProducts.reduce((sum, product) => sum + parseFloat(product.rating || 0), 0) / sellerProducts.length).toFixed(1) : 0;
                
                document.getElementById('totalProducts').textContent = totalProducts;
                document.getElementById('totalSales').textContent = totalSales;
                document.getElementById('totalRevenue').textContent = totalRevenue.toLocaleString();
                document.getElementById('storeRating').textContent = storeRating;
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„ØªØ§Ø¬Ø±:', error);
            }
        }

        function showAddProductForm() {
            document.getElementById('manageProductsSection').classList.add('hidden');
            document.getElementById('addProductForm').classList.remove('hidden');
            selectedImageFile = null;
            document.getElementById('imagePreviewContainer').style.display = 'none';
            document.getElementById('imageInfo').innerHTML = '';
        }

        function showManageProducts() {
            document.getElementById('addProductForm').classList.add('hidden');
            document.getElementById('manageProductsSection').classList.remove('hidden');
        }

        // ==================== Ù†Ø¸Ø§Ù… Ø±ÙØ¹ Ø§Ù„ØµÙˆØ± Ø§Ù„Ù…Ø­Ø³Ù† ====================
        function setupEnhancedImageUpload() {
            const fileInput = document.getElementById('productImageFile');
            const imagePreview = document.getElementById('imagePreview');
            const imagePreviewContainer = document.getElementById('imagePreviewContainer');
            const imageInfo = document.getElementById('imageInfo');
            
            if (fileInput) {
                fileInput.addEventListener('change', function(e) {
                    const file = e.target.files[0];
                    
                    if (file) {
                        handleSelectedImage(file, imagePreview, imagePreviewContainer, imageInfo);
                    } else {
                        selectedImageFile = null;
                        imagePreviewContainer.style.display = 'none';
                    }
                });
            }
        }

        function captureNewPhoto() {
            const fileInput = document.getElementById('productImageFile');
            if (!fileInput) return;
            
            fileInput.setAttribute('capture', 'environment');
            fileInput.accept = 'image/*';
            showNotification('Ø¬Ø§Ø±ÙŠ ÙØªØ­ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§... ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªÙ‚Ø§Ø· ØµÙˆØ±Ø© Ø¬Ø¯ÙŠØ¯Ø©', 'info');
            fileInput.click();
            
            setTimeout(() => {
                fileInput.removeAttribute('capture');
            }, 100);
        }

        function chooseFromGallery() {
            const fileInput = document.getElementById('productImageFile');
            if (!fileInput) return;
            
            fileInput.removeAttribute('capture');
            fileInput.accept = 'image/*';
            showNotification('Ø§Ø®ØªØ± ØµÙˆØ±Ø© Ù…Ù† Ù…Ø¹Ø±Ø¶ Ù‡Ø§ØªÙÙƒ', 'info');
            fileInput.click();
        }

        function handleSelectedImage(file, previewElement, containerElement, infoElement) {
            if (!file) return;
            
            if (file.size > 5 * 1024 * 1024) {
                showNotification('Ø­Ø¬Ù… Ø§Ù„ØµÙˆØ±Ø© ÙƒØ¨ÙŠØ± Ø¬Ø¯Ø§Ù‹. Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ 5 Ù…ÙŠØ¬Ø§Ø¨Ø§ÙŠØª', 'error');
                document.getElementById('productImageFile').value = '';
                return;
            }
            
            if (!file.type.match('image.*')) {
                showNotification('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù ØµÙˆØ±Ø© ÙÙ‚Ø·', 'error');
                document.getElementById('productImageFile').value = '';
                return;
            }
            
            selectedImageFile = file;
            
            const fileSize = (file.size / 1024).toFixed(1);
            const fileName = file.name.length > 20 ? file.name.substring(0, 20) + '...' : file.name;
            
            if (infoElement) {
                infoElement.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <span><i class="fas fa-file-image"></i> ${fileName}</span>
                        <span>${fileSize} ÙƒÙŠÙ„ÙˆØ¨Ø§ÙŠØª</span>
                    </div>
                    <div style="margin-top: 5px; color: var(--success);">
                        <i class="fas fa-check-circle"></i> ØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ØµÙˆØ±Ø© Ø¨Ù†Ø¬Ø§Ø­
                    </div>
                `;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                if (previewElement) previewElement.src = e.target.result;
                if (containerElement) containerElement.style.display = 'block';
            };
            reader.readAsDataURL(file);
            
            showNotification(`ØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ØµÙˆØ±Ø©: ${fileName}`, 'success');
        }

        function removeSelectedImage() {
            const fileInput = document.getElementById('productImageFile');
            const imagePreviewContainer = document.getElementById('imagePreviewContainer');
            const imageInfo = document.getElementById('imageInfo');
            
            if (fileInput) fileInput.value = '';
            if (imagePreviewContainer) imagePreviewContainer.style.display = 'none';
            if (imageInfo) imageInfo.innerHTML = '';
            selectedImageFile = null;
            
            showNotification('ØªÙ… Ø¥Ø²Ø§Ù„Ø© Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ù…Ø®ØªØ§Ø±Ø©', 'info');
        }

        // ==================== Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© ====================
        function switchTab(tab) {
            const loginTab = document.getElementById('loginTab');
            const registerTab = document.getElementById('registerTab');
            const loginSection = document.getElementById('loginSection');
            const registerSection = document.getElementById('registerSection');
            
            if (tab === 'login') {
                loginTab.classList.add('active');
                registerTab.classList.remove('active');
                loginSection.style.display = 'block';
                registerSection.style.display = 'none';
            } else {
                registerTab.classList.add('active');
                loginTab.classList.remove('active');
                loginSection.style.display = 'none';
                registerSection.style.display = 'block';
            }
        }

        function selectAccountType(type) {
            accountType = type;
            const buyerBtn = document.getElementById('buyerBtn');
            const sellerBtn = document.getElementById('sellerBtn');
            
            if (!buyerBtn || !sellerBtn) return;
            
            if (type === 'buyer') {
                buyerBtn.classList.add('selected');
                buyerBtn.style.borderColor = 'var(--primary)';
                buyerBtn.style.background = 'rgba(255, 106, 0, 0.05)';
                sellerBtn.classList.remove('selected');
                sellerBtn.style.borderColor = 'var(--light-gray)';
                sellerBtn.style.background = 'white';
            } else {
                sellerBtn.classList.add('selected');
                sellerBtn.style.borderColor = 'var(--primary)';
                sellerBtn.style.background = 'rgba(255, 106, 0, 0.05)';
                buyerBtn.classList.remove('selected');
                buyerBtn.style.borderColor = 'var(--light-gray)';
                buyerBtn.style.background = 'white';
            }
        }

        // ==================== Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ ====================
        function validateEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }

        function validatePhone(phone) {
            const re = /^[0-9]{9}$/;
            return re.test(phone);
        }

        // ==================== ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ====================
        const loginForm = document.getElementById('loginForm');
        if (loginForm) {
            loginForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const email = document.getElementById('loginEmail').value;
                const password = document.getElementById('loginPassword').value;
                
                if (!validateEmail(email)) {
                    showNotification('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØµØ­ÙŠØ­', 'error');
                    return;
                }
                
                if (password.length < 6) {
                    showNotification('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† 6 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„', 'error');
                    return;
                }
                
                setTimeout(() => {
                    try {
                        const storedUser = localStorage.getItem('babayemen_currentUser');
                        
                        if (storedUser) {
                            const user = JSON.parse(storedUser);
                            
                            if (user.email === email && user.password === password) {
                                currentUser = user;
                                localStorage.setItem('babayemen_currentUser', JSON.stringify(user));
                                showNotification('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ù†Ø¬Ø§Ø­!', 'success');
                                setTimeout(() => showMainApp(), 1000);
                                return;
                            }
                        }
                        
                        showNotification('Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©', 'error');
                    } catch (error) {
                        console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„:', error);
                        showNotification('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„', 'error');
                    }
                }, 500);
            });
        }

        // ==================== Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ ====================
        const registerForm = document.getElementById('registerForm');
        if (registerForm) {
            registerForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const fullName = document.getElementById('fullName').value.trim();
                const phone = document.getElementById('phone').value.trim();
                const email = document.getElementById('registerEmail').value.trim();
                const password = document.getElementById('registerPassword').value;
                const confirmPassword = document.getElementById('confirmPassword').value;
                const agreeTerms = document.getElementById('agreeTerms').checked;
                
                if (fullName.length < 3) {
                    showNotification('Ø§Ù„Ø§Ø³Ù… ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† 3 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„', 'error');
                    return;
                }
                
                if (!validatePhone(phone)) {
                    showNotification('Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† 9 Ø£Ø±Ù‚Ø§Ù…', 'error');
                    return;
                }
                
                if (!validateEmail(email)) {
                    showNotification('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØµØ­ÙŠØ­', 'error');
                    return;
                }
                
                if (password.length < 6) {
                    showNotification('ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† 6 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„', 'error');
                    return;
                }
                
                if (password !== confirmPassword) {
                    showNotification('ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± Ù…ØªØ·Ø§Ø¨Ù‚Ø©', 'error');
                    return;
                }
                
                if (!agreeTerms) {
                    showNotification('ÙŠØ¬Ø¨ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù…', 'error');
                    return;
                }
                
                const userData = {
                    id: 'user_' + Date.now(),
                    fullName: fullName,
                    email: email,
                    phone: phone,
                    password: password,
                    accountType: accountType,
                    joinedDate: new Date().toISOString().split('T')[0],
                    walletBalance: accountType === 'seller' ? 0 : 50000,
                    storeName: accountType === 'seller' ? `Ù…ØªØ¬Ø± ${fullName}` : null
                };
                
                setTimeout(() => {
                    try {
                        localStorage.setItem('babayemen_currentUser', JSON.stringify(userData));
                        currentUser = userData;
                        
                        showNotification(`ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­ ÙƒÙ€ ${accountType === 'seller' ? 'ØªØ§Ø¬Ø±' : 'Ù…Ø´ØªØ±ÙŠ'}!`, 'success');
                        setTimeout(() => showMainApp(), 1500);
                    } catch (error) {
                        console.error('Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨:', error);
                        showNotification('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨', 'error');
                    }
                }, 500);
            });
        }

        // ==================== Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯ Ù…Ø¹ Ø±ÙØ¹ ØµÙˆØ±Ø© ====================
        const newProductForm = document.getElementById('newProductForm');
        if (newProductForm) {
            newProductForm.addEventListener('submit', async function(e) {
                e.preventDefault();
                
                if (!currentUser || currentUser.accountType !== 'seller') {
                    showNotification('ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† ØªØ§Ø¬Ø±Ø§Ù‹ Ù„Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬Ø§Øª', 'error');
                    return;
                }
                
                const submitBtn = this.querySelector('button[type="submit"]');
                if (!submitBtn) return;
                
                const originalText = submitBtn.innerHTML;
                submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Ø¬Ø§Ø±ÙŠ Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬...';
                submitBtn.disabled = true;
                
                try {
                    let imageUrl = '';
                    
                    if (selectedImageFile) {
                        imageUrl = await new Promise((resolve, reject) => {
                            const reader = new FileReader();
                            reader.onload = function(e) {
                                resolve(e.target.result);
                            };
                            reader.onerror = reject;
                            reader.readAsDataURL(selectedImageFile);
                        });
                    } else {
                        const manualImageUrl = document.getElementById('productImageUrl').value;
                        if (manualImageUrl && manualImageUrl.startsWith('http')) {
                            imageUrl = manualImageUrl;
                        }
                    }
                    
                    if (!imageUrl) {
                        imageUrl = 'data:image/svg+xml;base64,' + btoa('<svg xmlns="http://www.w3.org/2000/svg" width="400" height="300" viewBox="0 0 400 300"><rect width="400" height="300" fill="#f8f9fa"/><text x="200" y="150" font-family="Arial" font-size="20" text-anchor="middle" fill="#6c757d">ØµÙˆØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬</text></svg>');
                    }
                    
                    const productData = {
                        id: 'prod_' + Date.now(),
                        name: document.getElementById('productName').value,
                        description: document.getElementById('productDescription').value,
                        category: document.getElementById('productCategory').value,
                        price: parseInt(document.getElementById('productPrice').value) || 0,
                        originalPrice: parseInt(document.getElementById('originalPrice').value) || null,
                        image: imageUrl,
                        seller: currentUser.storeName || `Ù…ØªØ¬Ø± ${currentUser.fullName}`,
                        sellerId: currentUser.id,
                        rating: (Math.random() * 2 + 3).toFixed(1),
                        reviews: Math.floor(Math.random() * 100),
                        stock: parseInt(document.getElementById('stockQuantity').value) || 10,
                        sales: 0,
                        isFeatured: document.getElementById('isFeatured').checked,
                        isNew: true,
                        createdAt: new Date().toISOString()
                    };
                    
                    const products = JSON.parse(localStorage.getItem('babayemen_products') || '[]');
                    products.push(productData);
                    localStorage.setItem('babayemen_products', JSON.stringify(products));
                    
                    loadSellerProducts();
                    updateSellerStats();
                    showManageProducts();
                    
                    this.reset();
                    selectedImageFile = null;
                    document.getElementById('imagePreviewContainer').style.display = 'none';
                    document.getElementById('imageInfo').innerHTML = '';
                    
                    showNotification('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­!', 'success');
                    
                } catch (error) {
                    console.error('Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬:', error);
                    showNotification('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø­ÙØ¸ Ø§Ù„Ù…Ù†ØªØ¬', 'error');
                } finally {
                    submitBtn.innerHTML = originalText;
                    submitBtn.disabled = false;
                }
            });
        }

        // ==================== ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© ====================
        function generateStars(rating) {
            const numRating = parseFloat(rating) || 0;
            const fullStars = Math.floor(numRating);
            const halfStar = numRating % 1 >= 0.5;
            const emptyStars = 5 - fullStars - (halfStar ? 1 : 0);
            
            return `
                ${'<i class="fas fa-star"></i>'.repeat(fullStars)}
                ${halfStar ? '<i class="fas fa-star-half-alt"></i>' : ''}
                ${'<i class="far fa-star"></i>'.repeat(emptyStars)}
            `;
        }

        function addToCart(productId) {
            if (!currentUser) {
                showNotification('ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹', 'warning');
                return;
            }
            
            try {
                const cart = JSON.parse(localStorage.getItem('babayemen_cart') || '[]');
                const existingItem = cart.find(item => item.productId === productId);
                
                if (existingItem) {
                    existingItem.quantity += 1;
                } else {
                    cart.push({
                        productId: productId,
                        quantity: 1,
                        addedAt: new Date().toISOString()
                    });
                }
                
                localStorage.setItem('babayemen_cart', JSON.stringify(cart));
                updateCartCount();
                showNotification('ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©', 'success');
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ù„Ù„Ø³Ù„Ø©:', error);
                showNotification('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ù„Ù„Ø³Ù„Ø©', 'error');
            }
        }

        function updateCartCount() {
            try {
                const cart = JSON.parse(localStorage.getItem('babayemen_cart') || '[]');
                const totalItems = cart.reduce((sum, item) => sum + (item.quantity || 0), 0);
                const cartCountElement = document.getElementById('cartCount');
                if (cartCountElement) {
                    cartCountElement.textContent = totalItems;
                }
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø¯ Ø§Ù„Ø³Ù„Ø©:', error);
            }
        }

        function logout() {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ØŸ')) {
                localStorage.removeItem('babayemen_currentUser');
                currentUser = null;
                showNotification('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬ Ø¨Ù†Ø¬Ø§Ø­', 'success');
                setTimeout(() => showAuthPage(), 1000);
            }
        }

        function showNotification(message, type = 'info') {
            try {
                const container = document.getElementById('notificationContainer');
                if (!container) return;
                
                const notification = document.createElement('div');
                notification.className = `notification ${type}`;
                
                let icon = 'info-circle';
                if (type === 'success') icon = 'check-circle';
                if (type === 'error') icon = 'exclamation-circle';
                if (type === 'warning') icon = 'exclamation-triangle';
                
                notification.innerHTML = `
                    <i class="fas fa-${icon}"></i>
                    <span>${message}</span>
                `;
                
                container.appendChild(notification);
                
                setTimeout(() => {
                    if (notification.parentNode === container) {
                        container.removeChild(notification);
                    }
                }, 3000);
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±:', error);
            }
        }

        // ==================== Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£ÙˆÙ„ÙŠØ© ====================
        function initializeApp() {
            try {
                if (!localStorage.getItem('babayemen_products')) {
                    const products = generateSampleProducts();
                    localStorage.setItem('babayemen_products', JSON.stringify(products));
                }
                
                if (!localStorage.getItem('babayemen_cart')) {
                    localStorage.setItem('babayemen_cart', JSON.stringify([]));
                }
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚:', error);
            }
        }

        function generateSampleProducts() {
            const categories = [
                'Ù…ÙˆØ§Ø¯ ØºØ°Ø§Ø¦ÙŠØ©', 'Ù…Ù„Ø§Ø¨Ø³ ÙˆØ£Ø­Ø°ÙŠØ©', 'Ø£Ø¬Ù‡Ø²Ø© Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©', 'Ø£Ø¯ÙˆØ§Øª Ù…Ù†Ø²Ù„ÙŠØ©', 
                'Ù…Ø³ØªØ­Ø¶Ø±Ø§Øª ØªØ¬Ù…ÙŠÙ„', 'Ø§Ù„Ø­Ø¯ÙŠØ¯ ÙˆØ§Ù„ØµÙ„Ø¨', 'Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø¥Ù†Ø´Ø§Ø¦ÙŠØ©', 'Ø§Ù„Ø¢Ù„Ø§Øª ÙˆØ§Ù„Ù…Ø¹Ø¯Ø§Øª',
                'Ø§Ù„ÙƒÙŠÙ…Ø§ÙˆÙŠØ§Øª Ø§Ù„ØµÙ†Ø§Ø¹ÙŠØ©', 'Ø§Ù„Ø·Ø§Ù‚Ø© ÙˆØ§Ù„Ù…ÙˆÙ„Ø¯Ø§Øª', 'Ù…ÙˆØ§Ø¯ Ø§Ù„Ø¨Ù†Ø§Ø¡', 'Ø§Ù„Ø£Ø³Ù„Ø§Ùƒ ÙˆØ§Ù„ÙƒØ§Ø¨Ù„Ø§Øª',
                'Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„ØµØ­ÙŠØ©', 'Ø§Ù„Ø£Ø®Ø´Ø§Ø¨', 'Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª ÙˆÙ‚Ø·Ø¹ Ø§Ù„ØºÙŠØ§Ø±'
            ];
            
            const stores = ['Ù…ØªØ¬Ø± Ø§Ù„Ø£Ø­Ù…Ø¯ÙŠ', 'ØªÙƒÙ†Ùˆ Ù…Ø§Ø±Øª', 'Ø¨ÙŠØª Ø§Ù„Ø±ÙŠØ§Ø¶Ø©', 'Ù…ØµÙ†Ø¹ Ø§Ù„Ø­Ø¯ÙŠØ¯ Ø§Ù„ÙˆØ·Ù†ÙŠ', 'Ù…ÙˆØ§Ø¯ Ø§Ù„Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù…ØªØ­Ø¯Ø©'];
            
            const productNames = {
                'Ø§Ù„Ø­Ø¯ÙŠØ¯ ÙˆØ§Ù„ØµÙ„Ø¨': ['Ø­Ø¯ÙŠØ¯ ØªØ³Ù„ÙŠØ­ 12Ù…Ù…', 'Ø£Ù„ÙˆØ§Ø­ ØµÙ„Ø¨', 'Ø£Ù†Ø§Ø¨ÙŠØ¨ Ø­Ø¯ÙŠØ¯', 'Ø­Ø¯ÙŠØ¯ Ø²Ø§ÙˆÙŠØ©', 'Ø³Ù„Ùƒ Ø­Ø¯ÙŠØ¯'],
                'Ù…ÙˆØ§Ø¯ Ø§Ù„Ø¨Ù†Ø§Ø¡': ['Ø£Ø³Ù…Ù†Øª', 'Ø±Ù…Ù„', 'Ø­ØµÙ‰', 'Ø¨Ù„ÙˆÙƒ Ø¨Ù†Ø§Ø¡', 'Ø¬ÙŠØ±'],
                'Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø¥Ù†Ø´Ø§Ø¦ÙŠØ©': ['Ø®Ø±Ø³Ø§Ù†Ø© Ø¬Ø§Ù‡Ø²Ø©', 'Ø£Ø¹Ù…Ø¯Ø© Ø®Ø±Ø³Ø§Ù†ÙŠØ©', 'Ø¨Ù„Ø§Ø· Ø¥Ù†ØªØ±Ù„ÙˆÙƒ', 'Ø£Ù†Ø§Ø¨ÙŠØ¨ PVC'],
                'Ø§Ù„Ø¢Ù„Ø§Øª ÙˆØ§Ù„Ù…Ø¹Ø¯Ø§Øª': ['Ù…ÙˆÙ„Ø¯ ÙƒÙ‡Ø±Ø¨Ø§Ø¡', 'Ø®Ù„Ø§Ø·Ø© Ø£Ø³Ù…Ù†Øª', 'Ù…Ù†Ø´Ø§Ø± ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠ', 'Ù…Ø«Ù‚Ø§Ø¨'],
                'Ø§Ù„ÙƒÙŠÙ…Ø§ÙˆÙŠØ§Øª Ø§Ù„ØµÙ†Ø§Ø¹ÙŠØ©': ['Ø£Ø³Ù…Ø¯Ø©', 'Ù…ÙˆØ§Ø¯ Ù„Ø§ØµÙ‚Ø©', 'Ø¯Ù‡Ø§Ù†Ø§Øª ØµÙ†Ø§Ø¹ÙŠØ©', 'Ù…Ù†Ø¸ÙØ§Øª ÙƒÙŠÙ…Ø§ÙˆÙŠØ©'],
                'Ø§Ù„Ø·Ø§Ù‚Ø© ÙˆØ§Ù„Ù…ÙˆÙ„Ø¯Ø§Øª': ['Ù…ÙˆÙ„Ø¯ 5 ÙƒÙŠÙ„Ùˆ ÙˆØ§Øª', 'Ø£Ù„ÙˆØ§Ø­ Ø´Ù…Ø³ÙŠØ©', 'Ø¨Ø·Ø§Ø±ÙŠØ§Øª Ø·Ø§Ù‚Ø©', 'Ù…Ø­ÙˆÙ„Ø§Øª ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ©'],
                'Ø§Ù„Ø£Ø³Ù„Ø§Ùƒ ÙˆØ§Ù„ÙƒØ§Ø¨Ù„Ø§Øª': ['Ø³Ù„Ùƒ Ù†Ø­Ø§Ø³ 4Ù…Ù…', 'ÙƒØ§Ø¨Ù„ Ø£Ø±Ø¶ÙŠ', 'Ø£Ø³Ù„Ø§Ùƒ ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ©', 'ÙƒØ§Ø¨Ù„Ø§Øª Ø§ØªØµØ§Ù„Ø§Øª'],
                'Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„ØµØ­ÙŠØ©': ['Ù…ÙˆØ§Ø³ÙŠØ± ØµØ­ÙŠØ©', 'Ø­ÙˆØ¶ Ø­Ù…Ø§Ù…', 'Ø®Ù„Ø§Ø· Ù…Ø§Ø¡', 'Ø³Ø®Ø§Ù† Ù…Ø§Ø¡'],
                'Ø§Ù„Ø£Ø®Ø´Ø§Ø¨': ['Ø®Ø´Ø¨ Ø±ÙˆØ³ÙŠ', 'Ø£Ø¨Ù„ÙƒØ§Ø´', 'Ø£Ø®Ø´Ø§Ø¨ Ø¨Ù†Ø§Ø¡', 'Ø£Ù„ÙˆØ§Ø­ MDF'],
                'Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª ÙˆÙ‚Ø·Ø¹ Ø§Ù„ØºÙŠØ§Ø±': ['Ø¥Ø·Ø§Ø±Ø§Øª Ø³ÙŠØ§Ø±Ø§Øª', 'Ø¨Ø·Ø§Ø±ÙŠØ© Ø³ÙŠØ§Ø±Ø©', 'Ø²ÙŠØª Ù…Ø­Ø±Ùƒ', 'ÙÙ„ØªØ± Ù‡ÙˆØ§Ø¡']
            };
            
            const products = [];
            
            // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù†ØªØ¬Ø§Øª Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©
            for (let i = 1; i <= 30; i++) {
                const category = categories[i % categories.length];
                const nameList = productNames[category] || [`Ù…Ù†ØªØ¬ ${category} ${i}`];
                const productName = nameList[i % nameList.length];
                const store = stores[i % stores.length];
                
                products.push({
                    id: `prod_${i}`,
                    name: productName,
                    description: `ÙˆØµÙ ØªÙØµÙŠÙ„ÙŠ Ù„Ù€ ${productName} Ø¨Ø£Ø¹Ù„Ù‰ Ø¬ÙˆØ¯Ø© ÙˆÙ…ÙˆØ§ØµÙØ§Øª. Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ Ù…Ù† Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ÙÙŠ ÙØ¦ØªÙ‡ ÙˆÙŠØªÙ…ÙŠØ² Ø¨Ø§Ù„Ø¬ÙˆØ¯Ø© Ø§Ù„Ø¹Ø§Ù„ÙŠØ© ÙˆØ§Ù„Ø³Ø¹Ø± Ø§Ù„Ù…Ù†Ø§Ø³Ø¨.`,
                    category: category,
                    price: Math.floor(Math.random() * 50000) + 10000,
                    originalPrice: Math.floor(Math.random() * 70000) + 15000,
                    rating: (Math.random() * 2 + 3).toFixed(1),
                    reviews: Math.floor(Math.random() * 100),
                    seller: store,
                    sellerId: `seller_${(i % 5) + 1}`,
                    isFeatured: i < 8,
                    isNew: i > 15,
                    stock: Math.floor(Math.random() * 50) + 10,
                    sales: Math.floor(Math.random() * 20),
                    createdAt: new Date(Date.now() - i * 86400000).toISOString()
                });
            }
            
            return products;
        }

        // ==================== Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…Ø³ØªÙ…Ø¹ÙŠÙ† Ù„Ù„Ø£Ø­Ø¯Ø§Ø« ====================
        function setupEventListeners() {
            // Ø¥Ø¹Ø¯Ø§Ø¯ Ø£Ø²Ø±Ø§Ø± Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±
            setupPasswordToggle('loginPassword', 'toggleLoginPassword');
            setupPasswordToggle('registerPassword', 'toggleRegisterPassword');
            setupPasswordToggle('confirmPassword', 'toggleConfirmPassword');
            
            // Ø²Ø± Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ø£Ø¹Ù„Ù‰
            const scrollToTopBtn = document.getElementById('scrollToTop');
            if (scrollToTopBtn) {
                window.addEventListener('scroll', () => {
                    if (window.pageYOffset > 300) {
                        scrollToTopBtn.classList.add('show');
                    } else {
                        scrollToTopBtn.classList.remove('show');
                    }
                });
                
                scrollToTopBtn.addEventListener('click', () => {
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                });
            }
        }

        function setupPasswordToggle(passwordId, toggleId) {
            const passwordInput = document.getElementById(passwordId);
            const toggleBtn = document.getElementById(toggleId);
            
            if (passwordInput && toggleBtn) {
                toggleBtn.addEventListener('click', function() {
                    const icon = this.querySelector('i');
                    if (passwordInput.type === 'password') {
                        passwordInput.type = 'text';
                        icon.classList.remove('fa-eye');
                        icon.classList.add('fa-eye-slash');
                    } else {
                        passwordInput.type = 'password';
                        icon.classList.remove('fa-eye-slash');
                        icon.classList.add('fa-eye');
                    }
                });
            }
        }

        // ==================== ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ØªÙ†Ù‚Ù„ ====================
        function showCategories() {
            showNotification('ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙØ¦Ø§Øª Ø¨Ø§Ù„ÙØ¹Ù„', 'info');
        }

        function showStores() {
            showNotification('ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…ØªØ§Ø¬Ø± Ø¨Ø§Ù„ÙØ¹Ù„', 'info');
        }

        function showCart() {
            try {
                const cart = JSON.parse(localStorage.getItem('babayemen_cart') || '[]');
                const products = JSON.parse(localStorage.getItem('babayemen_products') || '[]');
                
                currentView = 'cart';
                
                let cartItemsHtml = '';
                let totalPrice = 0;
                
                if (cart.length === 0) {
                    cartItemsHtml = `
                        <div style="text-align: center; padding: 50px; background: white; border-radius: var(--radius); box-shadow: var(--shadow);">
                            <i class="fas fa-shopping-cart" style="font-size: 64px; color: var(--light-gray); margin-bottom: 20px;"></i>
                            <h3 style="color: var(--gray); margin-bottom: 10px;">Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚ ÙØ§Ø±ØºØ©</h3>
                            <p style="color: var(--gray);">Ù„Ù… ØªÙ‚Ù… Ø¨Ø¥Ø¶Ø§ÙØ© Ø£ÙŠ Ù…Ù†ØªØ¬Ø§Øª Ø¥Ù„Ù‰ Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚ Ø¨Ø¹Ø¯.</p>
                            <button class="btn btn-primary" onclick="showHome()" style="margin-top: 20px;">
                                <i class="fas fa-shopping-bag"></i> ØªØµÙØ­ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
                            </button>
                        </div>
                    `;
                } else {
                    cart.forEach(cartItem => {
                        const product = products.find(p => p.id === cartItem.productId);
                        if (product) {
                            const itemTotal = product.price * cartItem.quantity;
                            totalPrice += itemTotal;
                            
                            cartItemsHtml += `
                                <div class="product-card" style="display: flex; gap: 20px; align-items: center;">
                                    <div class="product-image" style="width: 120px; height: 120px; flex-shrink: 0;">
                                        ${getProductIcon(product.category)}
                                    </div>
                                    <div class="product-info" style="flex: 1;">
                                        <h3 class="product-title">${product.name}</h3>
                                        <div class="product-category">${product.category}</div>
                                        <p class="product-description">${product.description.substring(0, 80)}...</p>
                                        <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 15px;">
                                            <div class="product-price">
                                                <span class="current-price">${product.price.toLocaleString()} Ø±ÙŠØ§Ù„</span>
                                                <span style="color: var(--gray); font-size: 14px;">Ã— ${cartItem.quantity}</span>
                                            </div>
                                            <div style="font-weight: 600; color: var(--primary);">
                                                ${itemTotal.toLocaleString()} Ø±ÙŠØ§Ù„
                                            </div>
                                        </div>
                                        <div class="product-actions" style="margin-top: 10px;">
                                            <button class="btn btn-outline" onclick="updateCartQuantity('${product.id}', ${cartItem.quantity - 1})" ${cartItem.quantity <= 1 ? 'disabled' : ''}>
                                                <i class="fas fa-minus"></i>
                                            </button>
                                            <span style="padding: 0 15px; font-weight: 600;">${cartItem.quantity}</span>
                                            <button class="btn btn-outline" onclick="updateCartQuantity('${product.id}', ${cartItem.quantity + 1})">
                                                <i class="fas fa-plus"></i>
                                            </button>
                                            <button class="btn btn-primary" onclick="removeFromCart('${product.id}')" style="margin-right: 10px;">
                                                <i class="fas fa-trash"></i> Ø­Ø°Ù
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            `;
                        }
                    });
                    
                    cartItemsHtml += `
                        <div style="background: white; border-radius: var(--radius); padding: 30px; box-shadow: var(--shadow); margin-top: 30px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                                <h3>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø³Ù„Ø©</h3>
                                <div style="font-size: 24px; font-weight: 700; color: var(--primary);">
                                    ${totalPrice.toLocaleString()} Ø±ÙŠØ§Ù„
                                </div>
                            </div>
                            <div style="display: flex; gap: 15px;">
                                <button class="btn btn-outline" onclick="clearCart()" style="flex: 1;">
                                    <i class="fas fa-trash"></i> ØªÙØ±ÙŠØº Ø§Ù„Ø³Ù„Ø©
                                </button>
                                <button class="btn btn-primary" onclick="checkout()" style="flex: 2;">
                                    <i class="fas fa-shopping-bag"></i> Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø´Ø±Ø§Ø¡
                                </button>
                            </div>
                        </div>
                    `;
                }
                
                document.getElementById('buyerInterface').innerHTML = `
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 20px;">
                        <button class="btn btn-outline" onclick="showHome()">
                            <i class="fas fa-arrow-right"></i> Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
                        </button>
                        <h2 class="section-title">
                            <i class="fas fa-shopping-cart"></i> Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚
                            <span style="font-size: 16px; color: var(--gray); margin-right: 10px;">
                                (${cart.length} Ù…Ù†ØªØ¬)
                            </span>
                        </h2>
                    </div>
                    ${cartItemsHtml}
                `;
                
                updateCartCount();
                showNotification('Ø¹Ø±Ø¶ Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚', 'success');
                
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ø¹Ø±Ø¶ Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚:', error);
                showNotification('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¹Ø±Ø¶ Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚', 'error');
            }
        }

        function showOrders() {
            showNotification('Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª...', 'info');
        }

        function showProfile() {
            showNotification('Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ...', 'info');
        }

        function showWallet() {
            showNotification('Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­ÙØ¸Ø©...', 'info');
        }

        function showWishlist() {
            showNotification('Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ù…Ù†ÙŠØ§Øª...', 'info');
        }

        function showAllOffers() {
            showNotification('Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ø±ÙˆØ¶...', 'info');
        }

        function showAllProducts() {
            currentView = 'allProducts';
            
            try {
                const products = JSON.parse(localStorage.getItem('babayemen_products') || '[]');
                
                document.getElementById('buyerInterface').innerHTML = `
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 20px;">
                        <button class="btn btn-outline" onclick="showHome()">
                            <i class="fas fa-arrow-right"></i> Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
                        </button>
                        <h2 class="section-title">
                            <i class="fas fa-boxes"></i> Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
                            <span style="font-size: 16px; color: var(--gray); margin-right: 10px;">
                                (${products.length} Ù…Ù†ØªØ¬)
                            </span>
                        </h2>
                    </div>
                    
                    <div class="products-grid" id="allProductsGrid"></div>
                `;
                
                const grid = document.getElementById('allProductsGrid');
                if (grid) {
                    grid.innerHTML = products.map(product => `
                        <div class="product-card">
                            ${product.isNew ? '<span class="product-badge">Ø¬Ø¯ÙŠØ¯</span>' : ''}
                            <div class="product-image">
                                ${getProductIcon(product.category)}
                            </div>
                            <div class="product-info">
                                <div class="product-category">${product.category}</div>
                                <h3 class="product-title">${product.name}</h3>
                                <p class="product-description">${product.description.substring(0, 50)}...</p>
                                <div class="product-price">
                                    <span class="current-price">${product.price.toLocaleString()} Ø±ÙŠØ§Ù„</span>
                                    ${product.originalPrice > product.price ? 
                                        `<span class="original-price">${product.originalPrice.toLocaleString()} Ø±ÙŠØ§Ù„</span>` : ''}
                                </div>
                                <div class="product-rating">
                                    <div class="stars">
                                        ${generateStars(product.rating)}
                                    </div>
                                    <span class="rating-count">(${product.reviews})</span>
                                </div>
                                <div class="product-actions">
                                    <button class="btn btn-whatsapp" onclick="contactSellerOnWhatsApp('${product.id}', event)">
                                        <i class="fab fa-whatsapp"></i> ØªÙˆØ§ØµÙ„
                                    </button>
                                    <button class="btn btn-outline" onclick="addToWishlist('${product.id}')">
                                        <i class="far fa-heart"></i>
                                    </button>
                                    <button class="btn btn-primary" onclick="addToCart('${product.id}')">
                                        <i class="fas fa-cart-plus"></i> Ø³Ù„Ø©
                                    </button>
                                </div>
                            </div>
                        </div>
                    `).join('');
                }
                
                updateCartCount();
                showNotification('Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª', 'success');
                
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:', error);
                showNotification('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª', 'error');
            }
        }

        function showAllStores() {
            showNotification('Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ØªØ§Ø¬Ø±...', 'info');
        }

        function showAbout() {
            alert('Ø¨Ø§Ø¨Ø§ Ø§Ù„ÙŠÙ…Ù† - Ø£ÙƒØ¨Ø± Ù…Ù†ØµØ© ØªØ¬Ø§Ø±Ø© Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ© ÙÙŠ Ø§Ù„ÙŠÙ…Ù†\nÙ†Ø­Ù† Ù†Ù‡Ø¯Ù Ø¥Ù„Ù‰ ØªÙˆÙÙŠØ± Ø£ÙØ¶Ù„ ØªØ¬Ø±Ø¨Ø© ØªØ³ÙˆÙ‚ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„ÙŠÙ…Ù†ÙŠÙŠÙ†.');
        }

        function showHowToSell() {
            alert('ÙƒÙŠÙ ØªØ¨Ø¯Ø£ Ø§Ù„Ø¨ÙŠØ¹ Ø¹Ù„Ù‰ Ø¨Ø§Ø¨Ø§ Ø§Ù„ÙŠÙ…Ù†:\n1. Ø³Ø¬Ù„ ÙƒØªØ§Ø¬Ø±\n2. Ø£Ø¶Ù Ù…Ù†ØªØ¬Ø§ØªÙƒ\n3. Ø­Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø¹Ø§Ø±\n4. Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¨ÙŠØ¹!');
        }

        function showHelp() {
            alert('Ù…Ø±ÙƒØ² Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©:\nÙ„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªÙˆØ§ØµÙ„ Ø¹Ø¨Ø±:\nØ§Ù„Ù‡Ø§ØªÙ: 777777777\nØ§Ù„Ø¨Ø±ÙŠØ¯: support@babayemen.com');
        }

        function showTerms() {
            alert('Ø´Ø±ÙˆØ· Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…:\n1. ÙŠØ¬Ø¨ Ø§Ù„Ø§Ù„ØªØ²Ø§Ù… Ø¨Ø§Ù„Ù‚ÙˆØ§Ù†ÙŠÙ† Ø§Ù„ÙŠÙ…Ù†ÙŠØ©\n2. Ø§Ø­ØªØ±Ø§Ù… Ø­Ù‚ÙˆÙ‚ Ø§Ù„Ù…Ù„ÙƒÙŠØ©\n3. Ø¹Ø¯Ù… Ù†Ø´Ø± Ù…Ø­ØªÙˆÙ‰ Ù…Ø³ÙŠØ¡\n4. Ø§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø³Ø±ÙŠØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
        }

        function showPrivacy() {
            alert('Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©:\nÙ†Ø­Ù† Ù†Ø­ØªØ±Ù… Ø®ØµÙˆØµÙŠØªÙƒ ÙˆÙ†Ù„ØªØ²Ù… Ø¨Ø­Ù…Ø§ÙŠØ© Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ø§Ù„Ø´Ø®ØµÙŠØ©.\nØ¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­ÙÙˆØ¸Ø© Ø¨Ø´ÙƒÙ„ Ø¢Ù…Ù†.');
        }

        function showMarketing() {
            alert('Ø®Ø¯Ù…Ø§Øª Ø§Ù„ØªØ³ÙˆÙŠÙ‚ Ø§Ù„Ø±Ù‚Ù…ÙŠ:\n1. Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªÙ‡Ø¯ÙÙŠÙ†\n2. ØªØ­Ø³ÙŠÙ† Ù…Ø­Ø±ÙƒØ§Øª Ø§Ù„Ø¨Ø­Ø«\n3. Ø§Ù„ØªØ³ÙˆÙŠÙ‚ Ø¹Ø¨Ø± ÙˆØ³Ø§Ø¦Ù„ Ø§Ù„ØªÙˆØ§ØµÙ„\n4. Ø§Ù„Ø­Ù…Ù„Ø§Øª Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†ÙŠØ©');
        }

        function showDelivery() {
            alert('Ø®Ø¯Ù…Ø© Ø§Ù„ØªÙˆØµÙŠÙ„:\nÙ†ÙˆÙØ± Ø®Ø¯Ù…Ø© ØªÙˆØµÙŠÙ„ Ø³Ø±ÙŠØ¹Ø© ÙˆØ¢Ù…Ù†Ø© Ù„Ø¬Ù…ÙŠØ¹ Ø£Ù†Ø­Ø§Ø¡ Ø§Ù„ÙŠÙ…Ù†.\nÙ…Ø¯Ø© Ø§Ù„ØªÙˆØµÙŠÙ„: 2-5 Ø£ÙŠØ§Ù… Ø¹Ù…Ù„');
        }

        function showPayment() {
            alert('Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ø¢Ù…Ù†:\n1. Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…\n2. Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¨Ù†ÙƒÙŠ\n3. Ø§Ù„Ù…Ø­ÙØ¸Ø© Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ©\n4. Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ø§Ø¦ØªÙ…Ø§Ù†ÙŠØ©');
        }

        function showSupport() {
            alert('Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ÙÙ†ÙŠ:\nÙ…ØªØ§Ø­ 24/7\nØ§Ù„Ù‡Ø§ØªÙ: 777777777\nØ§Ù„Ø¨Ø±ÙŠØ¯: tech@babayemen.com\nØ§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø§Ù„Ø­ÙŠØ©: Ù…ØªØ§Ø­Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆÙ‚Ø¹');
        }

        function editProduct(productId) {
            showNotification('Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬ Ù„Ù„ØªØ¹Ø¯ÙŠÙ„...', 'info');
        }

        function deleteProduct(productId) {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ØŸ')) {
                try {
                    const products = JSON.parse(localStorage.getItem('babayemen_products') || '[]');
                    const updatedProducts = products.filter(p => p.id !== productId);
                    localStorage.setItem('babayemen_products', JSON.stringify(updatedProducts));
                    
                    loadSellerProducts();
                    updateSellerStats();
                    showNotification('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬', 'success');
                } catch (error) {
                    console.error('Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬:', error);
                    showNotification('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬', 'error');
                }
            }
        }

        function addToWishlist(productId) {
            showNotification('ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¥Ù„Ù‰ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ù…Ù†ÙŠØ§Øª', 'success');
        }

        function showForgotPassword() {
            const email = prompt('Ø£Ø¯Ø®Ù„ Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù„Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±:');
            if (email && validateEmail(email)) {
                showNotification('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ø§Ø¨Ø· Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªØ¹ÙŠÙŠÙ† Ø¥Ù„Ù‰ Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ', 'success');
            } else if (email) {
                showNotification('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØµØ­ÙŠØ­', 'error');
            }
        }

        // ==================== ÙˆØ¸Ø§Ø¦Ù Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ù„Ø³Ù„Ø© ====================
        function updateCartQuantity(productId, newQuantity) {
            if (newQuantity < 1) {
                removeFromCart(productId);
                return;
            }
            
            try {
                const cart = JSON.parse(localStorage.getItem('babayemen_cart') || '[]');
                const itemIndex = cart.findIndex(item => item.productId === productId);
                
                if (itemIndex !== -1) {
                    cart[itemIndex].quantity = newQuantity;
                    localStorage.setItem('babayemen_cart', JSON.stringify(cart));
                    updateCartCount();
                    showCart(); // ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø§Ù„Ø³Ù„Ø©
                    showNotification('ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙƒÙ…ÙŠØ©', 'success');
                }
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« ÙƒÙ…ÙŠØ© Ø§Ù„Ù…Ù†ØªØ¬:', error);
                showNotification('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙƒÙ…ÙŠØ©', 'error');
            }
        }

        function removeFromCart(productId) {
            try {
                const cart = JSON.parse(localStorage.getItem('babayemen_cart') || '[]');
                const updatedCart = cart.filter(item => item.productId !== productId);
                localStorage.setItem('babayemen_cart', JSON.stringify(updatedCart));
                updateCartCount();
                showCart(); // ØªØ­Ø¯ÙŠØ« Ø¹Ø±Ø¶ Ø§Ù„Ø³Ù„Ø©
                showNotification('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ù…Ù† Ø§Ù„Ø³Ù„Ø©', 'success');
            } catch (error) {
                console.error('Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ù…Ù† Ø§Ù„Ø³Ù„Ø©:', error);
                showNotification('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ù…Ù† Ø§Ù„Ø³Ù„Ø©', 'error');
            }
        }

        function clearCart() {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† ØªÙØ±ÙŠØº Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚ØŸ')) {
                localStorage.setItem('babayemen_cart', JSON.stringify([]));
                updateCartCount();
                showCart();
                showNotification('ØªÙ… ØªÙØ±ÙŠØº Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚', 'success');
            }
        }

        function checkout() {
            if (currentUser) {
                showNotification('Ø¬Ø§Ø±ÙŠ Ø¥ØªÙ…Ø§Ù… Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø´Ø±Ø§Ø¡...', 'info');
                // Ù…Ø­Ø§ÙƒØ§Ø© Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø´Ø±Ø§Ø¡
                setTimeout(() => {
                    localStorage.setItem('babayemen_cart', JSON.stringify([]));
                    updateCartCount();
                    showNotification('ØªÙ… Ø¥ØªÙ…Ø§Ù… Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø´Ø±Ø§Ø¡ Ø¨Ù†Ø¬Ø§Ø­!', 'success');
                    showHome();
                }, 2000);
            } else {
                showNotification('ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹', 'warning');
            }
        }
    </script>
</body>
</html>
